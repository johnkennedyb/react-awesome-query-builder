(self.webpackChunk_react_awesome_query_builder_examples=self.webpackChunk_react_awesome_query_builder_examples||[]).push([[668],{759:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>Na});var n={};r.r(n),r.d(n,{loadFromSql:()=>Ho});var l=r(42664),o=r(6467),a=r(12024),i=r(67308),u=r(81299),c=r(88823),s=r.n(c),d=r(66861),p=r(32645),f=r(30965),m=r(62662),v=r(63378),g=r(26477),y=r(5821),h=r.n(y),b=r(36759),E=r(74048).A;E.getMillisecond||(E.getMillisecond=function(e){return e.millisecond()},E.setMillisecond=function(e,t){return e.clone().millisecond(t)});const A=E,O="function"==typeof b.A.generatePicker?b.A.generatePicker(A):b.A;var w=r(93990);"function"==typeof w.A.generateCalendar?w.A.generateCalendar(A):w.A;var S=i.forwardRef((function(e,t){return i.createElement(O,(0,l.A)({},e,{picker:"time",mode:void 0,ref:t}))}));S.displayName="TimePicker";const C=S;function x(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(x=function(){return!!e})()}var k=O.RangePicker,j=u.Aq.moment,P=function(e){function t(e){var r,n,l,o;(0,p.A)(this,t),n=this,l=t,o=[e],l=(0,v.A)(l),(r=(0,m.A)(n,x()?Reflect.construct(l,o||[],(0,v.A)(n).constructor):l.apply(n,o))).isValidSingleValue=function(e){var t=r.props.valueFormat,n=e?j(e,t):null;return!n||n&&n.isValid()},r.isValidValue=function(e){return r.props.isSpecialRange?!e||e.map((function(e){return r.isValidSingleValue(e)})).reduce((function(e,t){return e&&t}),!0):r.isValidSingleValue(e)},r.getMomentSingleValue=function(e){var t=r.props.valueFormat,n=e?j(e,t):null;return n&&!n.isValid()&&(n=null),n},r.getMomentValue=function(e){return r.props.isSpecialRange?e?e.map((function(e){return r.getMomentSingleValue(e)})):[null,null]:r.getMomentSingleValue(e)},r.formatSingleValue=function(e){var t=r.props.valueFormat;return e&&e.isValid()?e.format(t):void 0},r.formatValue=function(e){return r.props.isSpecialRange?e?e.map((function(e){return r.formatSingleValue(e)})):[void 0,void 0]:r.formatSingleValue(e)},r.handleChange=function(e){var t=r.props.setValue;r.isValidValue(e)&&t(r.formatValue(e))};var a=e.value,i=e.setValue;return r.isValidValue(a)||i(r.formatValue(r.getMomentValue(a))),r}return(0,g.A)(t,e),(0,f.A)(t,[{key:"render",value:function(){var e=this.props,t=e.placeholder,r=e.placeholders,n=e.customProps,o=e.value,a=e.dateFormat,u=e.config,c=e.readonly,s=e.isSpecialRange,d=u.settings.renderSize,p=this.getMomentValue(o);return s?i.createElement(k,(0,l.A)({disabled:c,key:"widget-date",placeholder:r,size:d,format:a,value:p,onChange:this.handleChange},n)):i.createElement(O,(0,l.A)({disabled:c,key:"widget-date",placeholder:t,size:d,format:a,value:p,onChange:this.handleChange},n))}}])}(i.PureComponent);function R(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(R=function(){return!!e})()}P.propTypes={setValue:h().func.isRequired,value:h().oneOfType([h().string,h().arrayOf(h().string)]),field:h().any,config:h().object.isRequired,placeholder:h().string,placeholders:h().arrayOf(h().string),customProps:h().object,readonly:h().bool,dateFormat:h().string,valueFormat:h().string},P.defaultProps={dateFormat:"YYYY-MM-DD",valueFormat:"YYYY-MM-DD"};var T=u.Aq.moment,F=function(e){function t(e){var r,n,l,o;(0,p.A)(this,t),n=this,l=t,o=[e],l=(0,v.A)(l),(r=(0,m.A)(n,R()?Reflect.construct(l,o||[],(0,v.A)(n).constructor):l.apply(n,o))).handleChange=function(e){var t=r.props,n=t.setValue,l=t.valueFormat,o=e&&e.isValid()?e.format(l):void 0;(o||null===e)&&n(o)};var a=e.valueFormat,i=e.value,u=e.setValue,c=i?T(i,a):null;return c&&!c.isValid()&&u(null),r}return(0,g.A)(t,e),(0,f.A)(t,[{key:"render",value:function(){var e=this.props,t=e.placeholder,r=e.customProps,n=e.value,o=e.valueFormat,a=e.dateFormat,u=e.timeFormat,c=e.use12Hours,s=e.config,d=e.readonly,p=s.settings.renderSize,f=n?T(n,o):null,m=a+" "+u;return i.createElement(O,(0,l.A)({disabled:d,key:"widget-datetime",use12Hours:c,showTime:{format:u},placeholder:t,size:p,format:m,value:f,onChange:this.handleChange},r))}}])}(i.PureComponent);function W(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(W=function(){return!!e})()}F.propTypes={setValue:h().func.isRequired,value:h().string,config:h().object.isRequired,field:h().any,placeholder:h().string,customProps:h().object,readonly:h().bool,timeFormat:h().string,dateFormat:h().string,valueFormat:h().string,use12Hours:h().bool},F.defaultProps={timeFormat:"HH:mm",dateFormat:"YYYY-MM-DD",valueFormat:"YYYY-MM-DD HH:mm:ss",use12Hours:!1};var V=u.Aq.moment,L=function(e){function t(e){var r,n,l,o;(0,p.A)(this,t),n=this,l=t,o=[e],l=(0,v.A)(l),(r=(0,m.A)(n,W()?Reflect.construct(l,o||[],(0,v.A)(n).constructor):l.apply(n,o))).handleChange=function(e){var t=r.props,n=t.setValue,l=t.valueFormat,o=t.timeFormat;e&&e.isValid()&&"HH:mm"==o&&e.set({second:0,millisecond:0});var a=e&&e.isValid()?e.format(l):void 0;(a||null===e)&&n(a)};var a=e.valueFormat,i=e.value,u=e.setValue,c=i?V(i,a):null;return c&&!c.isValid()&&u(null),r}return(0,g.A)(t,e),(0,f.A)(t,[{key:"render",value:function(){var e=this.props,t=e.placeholder,r=e.customProps,n=e.value,o=e.valueFormat,a=e.timeFormat,u=e.use12Hours,c=e.config,s=e.readonly,d=c.settings.renderSize,p=n?V(n,o):null;return i.createElement(C,(0,l.A)({disabled:s,use12Hours:u,key:"widget-time",size:d,placeholder:t,format:a,value:p,onChange:this.handleChange},r))}}])}(i.PureComponent);L.propTypes={setValue:h().func.isRequired,value:h().string,config:h().object.isRequired,field:h().any,placeholder:h().string,customProps:h().object,readonly:h().bool,timeFormat:h().string,valueFormat:h().string,use12Hours:h().bool},L.defaultProps={timeFormat:"HH:mm",valueFormat:"HH:mm:ss",use12Hours:!1};var D=r(6838),q=48,I={bottomLeft:{points:["tl","bl"],offset:[0,4],overflow:{adjustX:0,adjustY:1}},bottomRight:{points:["tr","br"],offset:[0,4],overflow:{adjustX:1,adjustY:1}},topLeft:{points:["bl","tl"],offset:[0,-4],overflow:{adjustX:0,adjustY:1}},topRight:{points:["br","tr"],offset:[0,-4],overflow:{adjustX:1,adjustY:1}}},_=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"'Helvetica Neue', Helvetica, Arial, sans-serif",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"14px";if("undefined"!=typeof document){var n=document.createElement("div");n.innerText=e;var l={position:"absolute",float:"left","white-space":"nowrap",visibility:"hidden","font-size":r,"font-family":t};for(var o in l)n.style[o]=l[o];var a=(n=document.body.appendChild(n)).offsetWidth;return document.body.removeChild(n),a}},B=r(64234),M=r.n(B);function N(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(N=function(){return!!e})()}var U=u.Aq.ReactUtils.useOnPropsChanged,z=u.Aq.ListUtils.mapListValues,G=D.A.Option,$={value:"value",title:"children",groupTitle:"grouplabel"},H=function(e){function t(e){var r,n,l,o;return(0,p.A)(this,t),n=this,l=t,o=[e],l=(0,v.A)(l),(r=(0,m.A)(n,N()?Reflect.construct(l,o||[],(0,v.A)(n).constructor):l.apply(n,o))).handleChange=function(e){r.props.setValue(e)},r.filterOption=function(e,t){return r.props.config.settings.listKeysForSearch.map((function(e){return $[e]})).map((function(e){return"string"==typeof t[e]?t[e]:""})).join("\0").toLowerCase().indexOf(e.toLowerCase())>=0},U(r),r.onPropsChanged(e),r}return(0,g.A)(t,e),(0,f.A)(t,[{key:"onPropsChanged",value:function(e){var t=e.listValues,r=0;z(t,(function(e){var t=e.title;e.value,r=Math.max(r,_(t,null))})),!isNaN(r)&&r&&(this.optionsMaxWidth=r),this.options=z(t,(function(e){var t=e.title,r=e.value;return i.createElement(G,{key:r+"",value:r+""},t)}))}},{key:"render",value:function(){var e=this.props,t=e.config,r=e.placeholder,n=e.customProps,o=e.value,a=e.readonly,u=t.settings.renderSize,c=_(r),s=this.optionsMaxWidth?this.optionsMaxWidth+q:null,d=o?s:c?c+q:null,p=null!=o?o+"":void 0,f=M()(n,[""]);return i.createElement(D.A,(0,l.A)({disabled:a,style:{width:d},key:"widget-select",popupMatchSelectWidth:!1,placeholder:r,size:u,value:p,onChange:this.handleChange,filterOption:this.filterOption},f),this.options)}}])}(i.Component);H.propTypes={setValue:h().func.isRequired,config:h().object.isRequired,field:h().any,value:h().oneOfType([h().string,h().number]),customProps:h().object,fieldDefinition:h().object,readonly:h().bool,listValues:h().oneOfType([h().object,h().array])};var Y=r(70502),K=r(99904);function J(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(J=function(){return!!e})()}var Q=function(e){function t(){var e,r,n,l;(0,p.A)(this,t);for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return r=this,n=t,l=[].concat(a),n=(0,v.A)(n),(e=(0,m.A)(r,J()?Reflect.construct(n,l||[],(0,v.A)(r).constructor):n.apply(r,l))).handleChange=function(t){var r=t.target.value,n=""===r?void 0:r;e.props.setValue(n)},e}return(0,g.A)(t,e),(0,f.A)(t,[{key:"render",value:function(){var e=this.props,t=e.config,r=e.placeholder,n=e.customProps,o=e.value,a=e.readonly,u=e.maxLength,c=t.settings.renderSize,s=null!=o?o:null;return i.createElement(Y.A,null,i.createElement(K.A,(0,l.A)({disabled:a,key:"widget-text",size:c,type:"text",value:s,placeholder:r,maxLength:u,onChange:this.handleChange},n)))}}])}(i.PureComponent);function X(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(X=function(){return!!e})()}Q.propTypes={setValue:h().func.isRequired,placeholder:h().string,config:h().object.isRequired,value:h().string,field:h().any,readonly:h().bool,customProps:h().object,maxLength:h().number};var Z=K.A.TextArea,ee=function(e){function t(){var e,r,n,l;(0,p.A)(this,t);for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return r=this,n=t,l=[].concat(a),n=(0,v.A)(n),(e=(0,m.A)(r,X()?Reflect.construct(n,l||[],(0,v.A)(r).constructor):n.apply(r,l))).handleChange=function(t){var r=t.target.value,n=""===r?void 0:r;e.props.setValue(n)},e}return(0,g.A)(t,e),(0,f.A)(t,[{key:"render",value:function(){var e=this.props,t=e.config,r=e.placeholder,n=e.customProps,o=e.value,a=e.readonly,u=e.maxLength,c=e.maxRows,s=(e.fullWidth,t.settings),d=s.renderSize,p=s.defaultMaxRows,f=null!=o?o:null;return i.createElement(Y.A,null,i.createElement(Z,(0,l.A)({autoSize:{minRows:1,maxRows:c||p},maxLength:u,disabled:a,key:"widget-textarea",size:d,value:f,placeholder:r,onChange:this.handleChange},n)))}}])}(i.PureComponent);ee.propTypes={setValue:h().func.isRequired,placeholder:h().string,config:h().object.isRequired,value:h().string,field:h().any,readonly:h().bool,customProps:h().object,maxLength:h().number,maxRows:h().number};var te=r(7179);function re(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(re=function(){return!!e})()}var ne=function(e){function t(){var e,r,n,l;(0,p.A)(this,t);for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return r=this,n=t,l=[].concat(a),n=(0,v.A)(n),(e=(0,m.A)(r,re()?Reflect.construct(n,l||[],(0,v.A)(r).constructor):n.apply(r,l))).handleChange=function(t){""!==t&&null!==t||(t=void 0),e.props.setValue(t)},e}return(0,g.A)(t,e),(0,f.A)(t,[{key:"render",value:function(){var e=this.props,t=e.config,r=e.placeholder,n=e.customProps,o=e.value,a=e.min,u=e.max,c=e.step,s=e.readonly,d=t.settings.renderSize,p=null!=o?o:void 0;return i.createElement(Y.A,null,i.createElement(te.A,(0,l.A)({disabled:s,key:"widget-number",size:d,value:p,min:a,max:u,step:c,placeholder:r,onChange:this.handleChange},n)))}}])}(i.PureComponent);ne.propTypes={setValue:h().func.isRequired,placeholder:h().string,config:h().object.isRequired,field:h().any,value:h().oneOfType([h().string,h().number]),customProps:h().object,fieldDefinition:h().object,readonly:h().bool,min:h().number,max:h().number,step:h().number},ne.defaultProps={min:void 0,max:void 0,step:void 0};var le=r(13631),oe=r(9885),ae=["width"],ie=i.memo((function(e){var t=e.setValue,r=e.placeholder,n=e.config,o=(e.field,e.value),a=e.customProps,u=(e.fieldDefinition,e.readonly),c=(e.errorMessage,e.min),s=e.max,d=e.step,p=e.marks,f=n.settings,m=f.renderSize,v=(f.showErrorMessage,f.defaultSliderWidth),g=a||{},y=g.width,h=(0,oe.A)(g,ae),b=(0,i.useMemo)((function(){return h.input||{}}),[a]),E=(0,i.useMemo)((function(){return h.slider||h}),[a]),A=(0,i.useCallback)((function(e){return null!=e?e.toString():void 0}),[]),O=(0,i.useMemo)((function(){return{formatter:A}}),[A]),w=(0,i.useCallback)((function(e){""===e&&(e=void 0),t(e)}),[t]),S=o;null==S&&(S=null);var C=null==S&&c?c:S;return i.createElement(Y.A,{style:{display:"inline-flex",flexWrap:"wrap"}},i.createElement(Y.A,{key:"col-number",style:{float:"left",marginRight:"5px"}},i.createElement(te.A,(0,l.A)({key:"input-number",disabled:u,size:m,value:S,min:c,max:s,step:d,placeholder:r,onChange:w},b))),i.createElement(Y.A,{key:"col-slider",style:{float:"left",width:y||v}},i.createElement(le.A,(0,l.A)({key:"input-slider",disabled:u,value:C,tooltip:O,min:c,max:s,included:!0,step:d,marks:p,onChange:w},E))),i.createElement(Y.A,{key:"col-clear",style:{clear:"both"}}))}));ie.displayName="SliderWidget",ie.propTypes={setValue:h().func.isRequired,placeholder:h().string,config:h().object.isRequired,field:h().any,value:h().number,customProps:h().object,fieldDefinition:h().object,readonly:h().bool,min:h().number,max:h().number,step:h().number,marks:h().object};const ue=ie;var ce=r(73188),se=["width"];function de(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(de=function(){return!!e})()}var pe=function(e){function t(e){var r,n,l,o;(0,p.A)(this,t),n=this,l=t,o=[e],l=(0,v.A)(l),(r=(0,m.A)(n,de()?Reflect.construct(l,o||[],(0,v.A)(n).constructor):l.apply(n,o))).state={},r.handleChange=function(e){r.props.setValue(e)},r.handleChangeFrom=function(e){var t=r.props.value||[void 0,void 0];""!==e&&null!=e||(e=void 0),(t=(0,ce.A)(t))[0]=e,r.props.setValue(t)},r.handleChangeTo=function(e){var t=r.props.value||[void 0,void 0];""!==e&&null!=e||(e=void 0),(t=(0,ce.A)(t))[1]=e,r.props.setValue(t)},r.tipFormatter=function(e){return null!=e?e.toString():""};var i=e.value||[null,null],u=(0,a.A)(i,2);return u[0],u[1],e.value,r}return(0,g.A)(t,e),(0,f.A)(t,[{key:"render",value:function(){var e=this.props,t=e.config,r=e.placeholders,n=e.customProps,o=e.value,u=e.min,c=e.max,s=e.step,d=e.marks,p=e.textSeparators,f=e.readonly,m=t.settings,v=m.renderSize,g=m.defaultSliderWidth,y=n||{},h=y.width,b=(0,oe.A)(y,se),E=b.input||{},A=b.slider||b,O=null!=o?o:void 0,w=O||[null,null],S=(0,a.A)(w,2),C=S[0],x=S[1];return i.createElement(Y.A,{style:{display:"inline-flex",flexWrap:"wrap"}},i.createElement(Y.A,{style:{float:"left",marginRight:"5px"}},i.createElement(te.A,(0,l.A)({disabled:f,size:v,key:"numFrom",value:C,min:u,max:c,step:s,placeholder:r[0],onChange:this.handleChangeFrom},E))),i.createElement(Y.A,{style:{float:"left",marginRight:"5px",lineHeight:"20px"}},i.createElement("span",null,p[1])),i.createElement(Y.A,{style:{float:"left",marginRight:"5px"}},i.createElement(te.A,(0,l.A)({disabled:f,size:v,key:"numTo",value:x,min:u,max:c,step:s,placeholder:r[1],onChange:this.handleChangeTo},E))),i.createElement(Y.A,{style:{float:"left",width:h||g}},i.createElement(le.A,(0,l.A)({disabled:f,value:O,tooltip:{formatter:this.tipFormatter},min:u,max:c,step:s,marks:d,included:!0,range:!0,onChange:this.handleChange},A))),i.createElement(Y.A,{style:{clear:"both"}}))}}])}(i.PureComponent);pe.propTypes={setValue:h().func.isRequired,placeholder:h().string,placeholders:h().array,textSeparators:h().array,config:h().object.isRequired,field:h().any,value:h().array,customProps:h().object,fieldDefinition:h().object,readonly:h().bool,min:h().number,max:h().number,step:h().number,marks:h().object},pe.defaultProps={min:0,max:100,step:1,marks:void 0};var fe=r(43068);function me(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(me=function(){return!!e})()}var ve=function(e){function t(){var e,r,n,l;(0,p.A)(this,t);for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return r=this,n=t,l=[].concat(a),n=(0,v.A)(n),(e=(0,m.A)(r,me()?Reflect.construct(n,l||[],(0,v.A)(r).constructor):n.apply(r,l))).handleChange=function(t){e.props.setValue(t)},e}return(0,g.A)(t,e),(0,f.A)(t,[{key:"render",value:function(){var e=this.props,t=e.customProps,r=e.value,n=e.labelYes,o=e.labelNo,a=e.readonly;return i.createElement(fe.A,(0,l.A)({checkedChildren:n||null,unCheckedChildren:o||null,checked:r||null,onChange:this.handleChange,disabled:a},t))}}])}(i.PureComponent);function ge(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ge=function(){return!!e})()}ve.propTypes={setValue:h().func.isRequired,value:h().bool,config:h().object.isRequired,field:h().any,customProps:h().object,readonly:h().bool,labelYes:h().string,labelNo:h().string},ve.defaultProps={labelYes:null,labelNo:null};var ye=u.Aq.ReactUtils.useOnPropsChanged,he=u.Aq.ListUtils.mapListValues,be=D.A.Option,Ee=function(e){function t(e){var r,n,l,o;return(0,p.A)(this,t),n=this,l=t,o=[e],l=(0,v.A)(l),(r=(0,m.A)(n,ge()?Reflect.construct(l,o||[],(0,v.A)(n).constructor):l.apply(n,o))).handleChange=function(e){e&&!e.length&&(e=void 0),r.props.setValue(e)},r.filterOption=function(e,t){return(t.children||t.value).toLowerCase().indexOf(e.toLowerCase())>=0},ye(r),r.onPropsChanged(e),r}return(0,g.A)(t,e),(0,f.A)(t,[{key:"onPropsChanged",value:function(e){var t=e.listValues,r=0;he(t,(function(e){var t=e.title;e.value,r=Math.max(r,_(t,null))})),!isNaN(r)&&r&&(this.optionsMaxWidth=r),this.options=he(t,(function(e){var t=e.title,r=e.value;return i.createElement(be,{key:r,value:r},t)}))}},{key:"render",value:function(){var e=this.props,t=e.config,r=e.placeholder,n=e.allowCustomValues,o=e.customProps,a=e.value,u=e.readonly,c=t.settings.renderSize,s=_(r),d=s?s+q:null,p=a&&a.length?a:void 0,f=p?null:d,m=this.optionsMaxWidth?this.optionsMaxWidth+q:null,v=M()(o,["showCheckboxes"]);return i.createElement(D.A,(0,l.A)({disabled:u,mode:n?"tags":"multiple",style:{minWidth:f,width:f},dropdownStyle:{width:m},key:"widget-multiselect",popupMatchSelectWidth:!1,placeholder:r,size:c,value:p,onChange:this.handleChange,filterOption:this.filterOption},v),this.options)}}])}(i.Component);Ee.propTypes={setValue:h().func.isRequired,config:h().object.isRequired,value:h().array,field:h().any,placeholder:h().string,customProps:h().object,fieldDefinition:h().object,readonly:h().bool,listValues:h().oneOfType([h().object,h().array]),allowCustomValues:h().bool};var Ae=r(36234),Oe=r(8691),we=r(33012),Se=r(80920),Ce=r.n(Se);function xe(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return ke(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ke(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,l=function(){};return{s:l,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:l}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,i=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){i=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(i)throw o}}}}function ke(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var je=u.Aq.Autocomplete.fixListValuesGroupOrder,Pe=u.Aq.ListUtils.makeCustomListValue,Re=u.Rj.W,Te={value:"value",title:"label",groupTitle:"grouplabel"},Fe=r(3224),We=r(2716);function Ve(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return Le(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Le(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,l=function(){};return{s:l,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:l}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,i=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){i=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(i)throw o}}}}function Le(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var De=u.Aq.ListUtils,qe=De.getItemInListValues,Ie=De.listValuesToArray,_e=u.Aq.OtherUtils.isObjectOrArray,Be={id:"value",pId:"parent",rootPId:void 0},Me=function(e,t){var r=Be,n=qe(e,t),l=n?n[r.pId]:void 0,o=l?e.find((function(e){return e[r.id]===l})):void 0;return o?[o.value].concat((0,ce.A)(Me(e,o.value))):[]},Ne=function(e,t){var r=Be,n=qe(e,t);return n?e.filter((function(e){return e[r.pId]===n[r.id]})).map((function(e){return e.value})):[]};function Ue(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ue=function(){return!!e})()}var ze=u.Aq.ReactUtils.useOnPropsChanged,Ge=u.Aq.ListUtils,$e=Ge.getTitleInListValues,He=Ge.mapListValues,Ye=function(e){function t(e){var r,n,l,o;return(0,p.A)(this,t),n=this,l=t,o=[e],l=(0,v.A)(l),(r=(0,m.A)(n,Ue()?Reflect.construct(l,o||[],(0,v.A)(n).constructor):l.apply(n,o))).handleChange=function(e){r.props.treeMultiple?!e||e.length?("object"==(0,We.A)(e[0])&&void 0!==e[0].value&&(e=e.map((function(e){return e.value}))),r.props.setValue(e)):r.props.setValue(void 0):r.props.setValue(e)},r.filterTreeNode=function(e,t){return t.title.toLowerCase().indexOf(e.toLowerCase())>=0},ze(r),r.onPropsChanged(e),r}return(0,g.A)(t,e),(0,f.A)(t,[{key:"onPropsChanged",value:function(e){var t=e.listValues,r=e.treeValues,n=e.treeMultiple,l=0,o=n?46:24;He(r||t,(function(e){var t=e.title,r=(e.value,e.path);l=Math.max(l,_(t,null)+10+20*(r?r.length:0)+o)})),!isNaN(l)&&l&&(this.optionsMaxWidth=l)}},{key:"render",value:function(){var e=this.props,t=e.config,r=e.placeholder,n=e.customProps,o=void 0===n?{}:n,a=e.value,u=e.treeMultiple,c=e.listValues,s=e.treeValues,d=e.treeExpandAll,p=e.readonly,f=s||c,m=o.treeCheckStrictly||!1,v=t.settings.renderSize,g=_(r),y=null!=a?a:void 0;m&&void 0!==y&&u&&(y=y.map((function(e){return{value:e,label:$e(f,e)}})));var h=y||!g?null:g+q+6;return Math.max(100,Math.min(800,this.optionsMaxWidth)),i.createElement(Fe.A,(0,l.A)({disabled:p,style:{minWidth:h,width:h},dropdownStyle:{width:"auto",paddingRight:"10px"},multiple:u,treeCheckable:u,key:"widget-treeselect",popupMatchSelectWidth:!1,placeholder:r,size:v,treeData:f,treeDataSimpleMode:Be,filterTreeNode:this.filterTreeNode,value:y,onChange:this.handleChange,treeDefaultExpandAll:d},o))}}])}(i.Component);Ye.propTypes={setValue:h().func.isRequired,config:h().object.isRequired,value:h().oneOfType([h().string,h().array]),field:h().any,placeholder:h().string,customProps:h().object,fieldDefinition:h().object,readonly:h().bool,treeMultiple:h().bool,listValues:h().oneOfType([h().object,h().array]),treeValues:h().oneOfType([h().object,h().array])};var Ke=D.A.Option,Je=D.A.OptGroup,Qe={key:"_value2",path:"value",label:"label",altLabel:"title",tooltip:"_tooltip",grouplabel:"grouplabel",fullLabel:"_fullLabel"},Xe=function(e){var t=e.setField,r=e.config,n=e.customProps,o=e.items,u=e.placeholder,c=e.selectedKey,s=e.selectedLabel,d=(e.selectedOpts,e.selectedAltLabel),p=e.selectedFullLabel,f=e.readonly,m=e.errorText,v=(n||{}).showSearch,g=(0,i.useState)(!1),y=(0,a.A)(g,2),h=y[0],b=y[1],E=(0,i.useState)(""),A=(0,a.A)(E,2),O=A[0],w=A[1],S=_(s||u),C=!!c,x=r.settings.dropdownPlacement,k=x?I[x]:void 0,j=C&&!v||!S?null:S+q,P=d||p;P==s&&(P=null);var R=(0,i.useMemo)((function(){return{width:j}}),[j]),T=(0,i.useCallback)((function(e){t(e)}),[t]),F=(0,i.useCallback)((function(e){w(e)}),[w]),W=(0,i.useCallback)((function(e,t){return r.settings.fieldItemKeysForSearch.map((function(e){return Qe[e]})).map((function(e){return"string"==typeof t[e]?t[e]:""})).join("\0").toLowerCase().indexOf(e.toLowerCase())>=0}),[r.settings.fieldItemKeysForSearch]),V=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.map((function(e){var r=e.items,n=e.key,l=e.path,o=e.label,a=e.fullLabel,u=e.altLabel,c=e.tooltip,s=e.grouplabel,d=e.disabled,p=e.matchesType,f=t>0?"  ".repeat(t):"",m=t>1?"  ".repeat(t-1):"",v=l||n;if(r){var g,y=r.filter((function(e){return!e.items})),h=r.filter((function(e){return!!e.items}));if(y.length){var b=f+o;c&&(b=i.createElement(we.A,{title:c},b)),g=i.createElement(Je,{key:v,label:b},V(y,t+1))}var E=h.length?V(h,t+1):[];return[].concat((0,ce.A)(g?[g]:[]),(0,ce.A)(E))}var A=p?i.createElement("b",null,m+o):m+o,O=c?i.createElement(we.A,{title:c},A):A;return i.createElement(Ke,{key:v,value:v,title:u,grouplabel:s,label:o,disabled:d,_fullLabel:a,_tooltip:c,_value2:n},O)})).flat(1/0)},L=V(o),B=i.createElement(D.A,(0,l.A)({open:h,onDropdownVisibleChange:b,dropdownAlign:k,popupMatchSelectWidth:!1,style:R,placeholder:u,size:r.settings.renderSize,onChange:T,value:c||void 0,optionLabelProp:"label",filterOption:W,disabled:f,status:m&&"error",showSearch:!!v,searchValue:O,onSearch:v?F:void 0},n),L);return P&&(B=i.createElement(we.A,{title:h?null:P},B)),B};Xe.displayName="FieldSelect";const Ze=Xe;var et=r(80034),tt=r(93975),rt=r(45440),nt=r(85733);function lt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(lt=function(){return!!e})()}var ot=rt.A.SubMenu,at=rt.A.Item,it=function(e){function t(){var e,r,n,l;(0,p.A)(this,t);for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return r=this,n=t,l=[].concat(a),n=(0,v.A)(n),(e=(0,m.A)(r,lt()?Reflect.construct(n,l||[],(0,v.A)(r).constructor):n.apply(r,l))).onChange=function(t){var r=t.key;t.keyPath,e.props.setField(r)},e}return(0,g.A)(t,e),(0,f.A)(t,[{key:"renderMenuItems",value:function(e){var t=this;return e.map((function(e){var r=e.items,n=e.key,l=e.path,o=e.label,a=(e.fullLabel,e.altLabel,e.tooltip),u=e.disabled,c=l||n,s=e.matchesType?i.createElement("b",null,o):o,d=a?i.createElement(we.A,{title:a},s):s;return r?i.createElement(ot,{key:c,title:i.createElement("span",null,d,"     ")},t.renderMenuItems(r)):i.createElement(at,{key:c,disabled:u},d)}))}},{key:"renderMenuToggler",value:function(e,t,r,n,l){var o=i.createElement(tt.Ay,{size:r.settings.renderSize,disabled:n,danger:!!l},e," ",i.createElement(nt.A,null));return t&&(o=i.createElement(we.A,{placement:"top",title:t},o)),o}},{key:"render",value:function(){var e=this.props,t=e.config,r=e.customProps,n=e.items,o=e.placeholder,a=e.errorText,u=e.selectedKeys,c=e.selectedLabel,s=(e.selectedOpts,e.readonly),d=e.selectedAltLabel,p=e.selectedFullLabel,f=this.renderMenuItems(n),m=i.createElement(rt.A,(0,l.A)({selectedKeys:u,onClick:this.onChange},M()(r,["showSearch"])),f),v=d||c||o,g=p;g==c&&(g=null);var y=this.renderMenuToggler(v,g,t,s,a);return s?y:i.createElement(et.A,{overlay:m,trigger:["click"],placement:t.settings.dropdownPlacement},y)}}])}(i.PureComponent);it.propTypes={config:h().object.isRequired,customProps:h().object,errorText:h().string,items:h().array.isRequired,placeholder:h().string,selectedKey:h().string,selectedKeys:h().array,selectedPath:h().array,selectedLabel:h().string,selectedAltLabel:h().string,selectedFullLabel:h().string,selectedOpts:h().object,readonly:h().bool,setField:h().func.isRequired};var ut=r(49139);function ct(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function st(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ct(Object(r),!0).forEach((function(t){(0,o.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ct(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function dt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(dt=function(){return!!e})()}var pt=u.Aq.ReactUtils.useOnPropsChanged,ft=u.Aq.ConfigUtils.getFieldParts,mt={key:"key",path:"_path",label:"_label",altLabel:"altLabel",tooltip:"tooltip",grouplabel:"grouplabel",fullLabel:"fullLabel"},vt=function(e){function t(e){var r,n,l,o;return(0,p.A)(this,t),n=this,l=t,o=[e],l=(0,v.A)(l),(r=(0,m.A)(n,dt()?Reflect.construct(l,o||[],(0,v.A)(n).constructor):l.apply(n,o))).setOpen=function(e){r.setState({open:e})},r.onChange=function(e){var t=r.props.parentField,n=t?t.split("."):[];r.props.setField([].concat((0,ce.A)(n),(0,ce.A)(e)))},r.filterOption=function(e,t){var n,l=r.props.config.settings.fieldItemKeysForSearch.map((function(e){return mt[e]}));return n=t[t.length-1],l.map((function(e){return"string"==typeof n[e]?n[e]:""})).join("\0").toLowerCase().indexOf(e.toLowerCase())>=0},pt(r),r.onPropsChanged(e),r.state={open:!1},r}return(0,g.A)(t,e),(0,f.A)(t,[{key:"onPropsChanged",value:function(e){var t=e.items;this.items=this.getItems(t)}},{key:"getItems",value:function(e){var t=this;return e.map((function(e){var r=e.items,n=e.matchesType,l=e.label,o=e.key,a=e.path,u=e.tooltip,c=n?i.createElement("b",null,l):l;return u&&(c=i.createElement(we.A,{title:u},c)),st(st({},e),{},r?{key:o,_path:a,items:t.getItems(r),label:c,_label:l}:{key:o,_path:a,label:c,_label:l})}))}},{key:"render",value:function(){var e=this.props,t=e.config,r=e.customProps,n=(e.items,e.placeholder),o=e.errorText,a=e.selectedPath,u=e.selectedLabel,c=e.selectedOpts,s=e.selectedAltLabel,d=(e.selectedFullLabel,e.readonly),p=(e.selectedField,e.parentField),f=this.state.open,m=st({},r);m.showSearch&&(m.showSearch={filter:this.filterOption}),t.settings.fieldSeparator;var v=function(e,t){if(!e)return e;for(var r=!0,n=0;n<t.length;n++){var l=t[n];if(void 0===e[n]||l!=e[n]){r=!1;break}}return r?e.slice(t.length):e}(a,ft(p,t)),g=i.createElement(ut.A,(0,l.A)({open:f,onDropdownVisibleChange:this.setOpen,status:o&&"error",fieldNames:{label:"label",value:"key",children:"items"},options:this.items,value:v,onChange:this.onChange,allowClear:!1,placeholder:n,size:t.settings.renderSize,disabled:d},m)),y=c.tooltip||s;return y==u&&(y=null),y&&(g=i.createElement(we.A,{title:f?null:y},g)),g}}])}(i.Component);function gt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(gt=function(){return!!e})()}vt.propTypes={config:h().object.isRequired,customProps:h().object,errorText:h().string,items:h().array.isRequired,placeholder:h().string,selectedKey:h().string,selectedKeys:h().array,selectedPath:h().array,selectedLabel:h().string,selectedAltLabel:h().string,selectedFullLabel:h().string,selectedOpts:h().object,readonly:h().bool,setField:h().func.isRequired};var yt=u.Aq.ReactUtils.useOnPropsChanged,ht={key:"_value2",path:"value",label:"label",altLabel:"altLabel",tooltip:"_tooltip",grouplabel:"_grouplabel",fullLabel:"fullLabel"},bt=function(e){function t(e){var r,n,l,o;return(0,p.A)(this,t),n=this,l=t,o=[e],l=(0,v.A)(l),(r=(0,m.A)(n,gt()?Reflect.construct(l,o||[],(0,v.A)(n).constructor):l.apply(n,o))).setOpen=function(e){r.setState({open:e})},r.onChange=function(e){r.props.setField(e)},r.filterTreeNode=function(e,t){return r.props.config.settings.fieldItemKeysForSearch.map((function(e){return ht[e]})).map((function(e){return"string"==typeof t[e]?t[e]:""})).join("\0").toLowerCase().indexOf(e.toLowerCase())>=0},yt(r),r.onPropsChanged(e),r.state={open:!1},r}return(0,g.A)(t,e),(0,f.A)(t,[{key:"onPropsChanged",value:function(e){var t=e.items,r=e.config.settings.fieldSeparator,n=0;this.treeData=this.getTreeData(t,(function(e){var t=e.label,l=e.path;n=Math.max(n,_(t,null)+10+20*(l.split(r).length-1)+24)})),!isNaN(n)&&n&&(this.optionsMaxWidth=n)}},{key:"getTreeData",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e.map((function(e){var n=e.items,l=e.key,o=e.path,a=e.label,u=e.fullLabel,c=e.altLabel,s=e.tooltip,d=e.disabled,p=e.grouplabel,f=e.matchesType;r&&r(e);var m=o||l,v=f?i.createElement("b",null,a):a,g=s?i.createElement(we.A,{title:s},v):v;return n?{value:m,title:g,children:t.getTreeData(n,r),selectable:!1,altLabel:c,fullLabel:u,label:a,disabled:d,_value2:l,_tooltip:s,_grouplabel:p}:{value:m,title:g,altLabel:c,fullLabel:u,label:a,disabled:d,_value2:l,_tooltip:s,_grouplabel:p}}))}},{key:"render",value:function(){var e=this.props,t=e.config,r=e.customProps,n=void 0===r?{}:r,o=e.placeholder,a=e.errorText,u=e.selectedKey,c=e.selectedLabel,s=e.selectedOpts,d=e.selectedAltLabel,p=e.selectedFullLabel,f=e.readonly,m=this.state.open,v=t.settings,g=v.renderSize,y=v.fieldSeparator,h=d||p;h==c&&(h=null);var b=u?u.split(y):null,E=b&&b.length>1?b.slice(0,-1).map((function(e,t){return b.slice(0,t+1).join(y)})):null,A=_(o),O=!!u,w=A?A+q+6:null,S=(Math.max(100,Math.min(800,this.optionsMaxWidth)),i.createElement(Fe.A,(0,l.A)({open:m,onDropdownVisibleChange:this.setOpen,status:a&&"error",onChange:this.onChange,value:u||void 0,style:{minWidth:w,width:O?null:w},dropdownStyle:{width:"auto",paddingRight:"10px"},multiple:!1,treeCheckable:!1,treeDataSimpleMode:!1,treeData:this.treeData,size:g,placeholder:o,filterTreeNode:this.filterTreeNode,treeDefaultExpandedKeys:E,popupMatchSelectWidth:!1,disabled:f},n)));return h&&!s.tooltip&&(S=i.createElement(we.A,{title:m?null:h},S)),S}}])}(i.Component);bt.propTypes={config:h().object.isRequired,customProps:h().object,errorText:h().string,items:h().array.isRequired,placeholder:h().string,selectedKey:h().string,selectedKeys:h().array,selectedPath:h().array,selectedLabel:h().string,selectedAltLabel:h().string,selectedFullLabel:h().string,selectedOpts:h().object,readonly:h().bool,setField:h().func.isRequired};var Et=r(31067),At=r(32871),Ot=r(47231),wt=r(65386),St=u.Aq.DragIcon,Ct={addRule:i.createElement(Et.A,null),addGroup:i.createElement(At.A,null),delRule:i.createElement(Ot.A,null),delGroup:i.createElement(Ot.A,null),delRuleGroup:i.createElement(Ot.A,null),addSubRuleSimple:i.createElement(Et.A,null),addSubRule:i.createElement(Et.A,null),addSubGroup:i.createElement(At.A,null),drag:i.createElement(wt.A,null)},xt={addSubRuleSimple:!0,delGroup:!0,delRuleGroup:!0,delRule:!0},kt={addRule:"action action--ADD-RULE",addGroup:"action action--ADD-GROUP",delRule:"action action--DELETE",delGroup:"action action--DELETE",delRuleGroup:"action action--DELETE",addSubRuleSimple:"action action--ADD-RULE",addSubRule:"action action--ADD-RULE",addSubGroup:"action action--ADD-GROUP"},jt={delRule:"text"},Pt={delRule:!0,delGroup:!0,delRuleGroup:!0},Rt=tt.Ay.Group,Tt=r(99629),Ft=r.n(Tt);function Wt(e,t,r){return t=(0,v.A)(t),(0,m.A)(e,Vt()?Reflect.construct(t,r||[],(0,v.A)(e).constructor):t.apply(e,r))}function Vt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Vt=function(){return!!e})()}var Lt=tt.Ay.Group,Dt=function(e){function t(){var e;(0,p.A)(this,t);for(var r=arguments.length,n=new Array(r),l=0;l<r;l++)n[l]=arguments[l];return(e=Wt(this,t,[].concat(n))).onClick=function(t){var r=e.props;(0,r.setConjunction)(r.item.key)},e}return(0,g.A)(t,e),(0,f.A)(t,[{key:"render",value:function(){var e=this.props,t=e.disabled,r=e.item;return i.createElement(tt.Ay,{disabled:t,type:r.checked?"primary":null,onClick:this.onClick},r.label)}}])}(i.PureComponent),qt=function(e){function t(){var e;(0,p.A)(this,t);for(var r=arguments.length,n=new Array(r),l=0;l<r;l++)n[l]=arguments[l];return(e=Wt(this,t,[].concat(n))).setNot=function(t){var r=e.props,n=r.setNot,l=r.not;n&&n(!l)},e}return(0,g.A)(t,e),(0,f.A)(t,[{key:"render",value:function(){var e=this.props,t=e.readonly,r=e.disabled,n=e.not,l=e.conjunctionOptions,o=e.config,a=e.setConjunction,u=e.notLabel,c=e.showNot,s=Object.keys(l).length,d=r,p=o.settings,f=p.forceShowConj,m=p.renderSize,v=f||s>1&&!d;return i.createElement(Lt,{key:"group-conjs-buttons",size:m,disabled:r||t},c&&(!t||n)&&i.createElement(tt.Ay,{key:"group-not",onClick:this.setNot,type:n?"primary":null,disabled:t},u),v&&Ft()(l,(function(e,n){return!t&&!r||e.checked?i.createElement(Dt,{key:e.id,item:e,disabled:r||t,setConjunction:a}):null})))}}])}(i.PureComponent),It=r(93849),_t=r(67317),Bt=r(30041),Mt=r(44657),Nt=r(64962);function Ut(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ut=function(){return!!e})()}var zt=Mt.Ay.Button,Gt=Mt.Ay.Group,$t=function(e){function t(){var e,r,n,l;(0,p.A)(this,t);for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return r=this,n=t,l=[].concat(a),n=(0,v.A)(n),(e=(0,m.A)(r,Ut()?Reflect.construct(n,l||[],(0,v.A)(r).constructor):n.apply(r,l))).onChange=function(t){(0,e.props.setValueSrc)(t.target.value)},e}return(0,g.A)(t,e),(0,f.A)(t,[{key:"render",value:function(){var e=this.props,t=e.config,r=e.valueSources,n=e.valueSrc,l=e.readonly,o=e.title,u=i.createElement(Gt,{value:n||"value",size:t.settings.renderSize,onChange:this.onChange,disabled:l},r.map((function(e){var t=(0,a.A)(e,2),r=t[0],n=t[1];return i.createElement(zt,{key:r,value:r},n.label)})));return i.createElement("span",null,i.createElement(Bt.A,{content:u,title:o},i.createElement(Nt.A,null)))}}])}(i.PureComponent),Ht=r(13601).A.confirm;const Yt={DateWidget:P,DateTimeWidget:F,TimeWidget:L,SelectWidget:H,TextWidget:Q,TextAreaWidget:ee,NumberWidget:ne,SliderWidget:ue,RangeWidget:pe,BooleanWidget:ve,MultiSelectWidget:Ee,AutocompleteWidget:function(e){var t,r,n=e.config,o=e.placeholder,a=e.allowCustomValues,u=e.customProps,c=e.value,s=e.readonly,d=e.multiple,p=e.useAsyncSearch,f=Re(e,{debounceTimeout:100,multiple:d,uif:"antd"}),m=f.open,v=f.onDropdownVisibleChange,g=f.onChange,y=f.isSpecialValue,h=(f.onSearch,f.inputValue),b=f.options,E=(f.isInitialLoading,f.isLoading),A=f.aPlaceholder,O=f.extendOptions,w=f.getOptionDisabled,S=f.getOptionIsCustom,C=f.getOptionLabel,x=f.onInputChange,k=O(b);if(d&&a&&null!=c&&c.length){var j,P=xe(c);try{var R=function(){var e=j.value;S(e)&&!b.find((function(t){return t.value===e}))&&k.push(Pe(e))};for(P.s();!(j=P.n()).done;)R()}catch(e){P.e(e)}finally{P.f()}}var T=(0,i.useMemo)((function(){return k.reduce((function(e,t){return Math.max(e,_(t.title,null))}),0)}),[b]),F=n.settings,W=F.defaultSelectWidth,V=(F.defaultSearchWidth,F.renderSize),L=_(o),I=(d?null!=c&&c.length:c)?c:d?[]:void 0,B=I||!L?null:L+q,M=T&&!isNaN(T)?T+q:null,N=B||W,U=i.useRef(!1),z={width:d?void 0:N,minWidth:N},G={width:M},$=d?(null==u?void 0:u.mode)||(a&&null!=u&&u.tokenSeparators?"tags":"multiple"):void 0,H=s?"":A,Y=function(e){var t=e.tooltip,r=C(e);return t&&(r=i.createElement(we.A,{title:t},r)),r},K=function(e){var t=e;arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&(t=je(t));var r,n=[],l=xe(t);try{for(l.s();!(r=l.n()).done;){var o=r.value,a=o.groupTitle;if(delete o.groupTitle,a){o.grouplabel=a;var i=void 0,u=n[n.length-1];null!=u&&u.options&&u.label===a?i=u:(i={label:a,options:[]},n.push(i)),i.options.push(o)}else n.push(o)}}catch(e){l.e(e)}finally{l.f()}return n}(null==k?void 0:k.filter((function(e){return!e.specialValue})).map((function(e){return{label:S(e)?i.createElement("span",{className:"customSelectOption"},C(e)):Y(e),value:e.value,groupTitle:e.groupTitle,disabled:w(e)}}))),J=null==k?void 0:k.filter((function(e){return!!e.specialValue})).map((function(e){return i.createElement("a",{style:{padding:"5px 10px",display:"block",cursor:"pointer"},key:e.specialValue,disabled:w(e),onClick:(t=e.specialValue,function(){var e=k.find((function(e){return e.specialValue==t}));g(null,t,e)})},C(e));var t})),Q=function(){var e=(0,Oe.A)(Ce().mark((function e(t,r){return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!d||!r.props||void 0!==r.value||void 0!==r.label){e.next=3;break}return e.abrupt("return");case 3:if(!y(r)){e.next=8;break}return e.next=6,g(null,t,r);case 6:e.next=11;break;case 8:if(!d){e.next=11;break}return e.next=11,g(null,t,r);case 11:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),X=function(){var e=(0,Oe.A)(Ce().mark((function e(t,r){var n,l;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=d&&t.length&&t.length>I.length&&t[t.length-1]==h,l=y(r)||"tags"===$&&n||U.current&&h,U.current=!1,l){e.next=6;break}return e.next=6,g(null,t,r);case 6:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),Z=function(){var e=(0,Oe.A)(Ce().mark((function e(t){return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return U.current&&(U.current=!1),e.next=3,x(null,t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ee=(0,i.useCallback)((function(e){return i.createElement("div",null,e,J.length>0&&i.createElement(i.Fragment,null,i.createElement(Ae.A,{style:{margin:"0px"}}),i.createElement("div",{style:{display:"flex",flexDirection:"column"}},J)))}),[k]),te=(0,i.useCallback)((function(e,t){return n.settings.listKeysForSearch.map((function(e){return Te[e]})).map((function(e){return"string"==typeof t[e]?t[e]:""})).join("\0").toLowerCase().indexOf(e.toLowerCase())>=0}),[n]);return i.createElement(D.A,(0,l.A)({filterOption:!p&&te,dropdownRender:ee,allowClear:!0,notFoundContent:E?null!==(t=n.settings.loadingLabel)&&void 0!==t?t:"Loading...":null!==(r=n.settings.notFoundLabel)&&void 0!==r?r:"Not found",disabled:s,mode:$,style:(null==u?void 0:u.style)||z,dropdownStyle:(null==u?void 0:u.dropdownStyle)||G,key:"widget-autocomplete",popupMatchSelectWidth:(null==u?void 0:u.popupMatchSelectWidth)||(null==u?void 0:u.dropdownMatchSelectWidth)||!1,placeholder:(null==u?void 0:u.placeholder)||H,onDropdownVisibleChange:v,onChange:X,onClear:function(){m&&(U.current=!0)},onSelect:Q,onSearch:Z,showSearch:!0,size:V,loading:E,value:I,searchValue:h,open:m,options:K},u))},TreeSelectWidget:Ye,FieldSelect:Ze,FieldDropdown:it,FieldCascader:vt,FieldTreeSelect:bt,Icon:function(e){var t=e.type,r=Ct[t]||null;return r||"drag"!==t||(r=i.createElement(St,null)),r},Button:function(e){var t=e.type,r=e.onClick,n=e.label,l=e.readonly,o=e.config.settings,a=e.renderIcon,u=o.renderSize,c=null==a?void 0:a({type:t,readonly:l}),s=xt[t]?"":n;return i.createElement(tt.Ay,{danger:!0===Pt[t],key:t,type:jt[t]||"default",icon:c,className:kt[t],onClick:r,size:u,disabled:l},s)},ButtonGroup:function(e){var t=e.children,r=e.config.settings.renderSize;return i.createElement(Rt,{size:r},t)},Conjs:qt,Switch:function(e){var t=e.value,r=e.setValue,n=e.label,l=e.checkedLabel,o=e.hideLabel,a=e.id,u=e.config,c=e.type,s=u.settings.renderSize,d=(0,i.useCallback)((function(e){return r(e)}),[r]),p=(0,i.useCallback)((function(){return r(!t)}),[r,t]),f=c,m=o?null:t&&l||n;return"lock"===c?i.createElement(tt.Ay,{key:a+f,type:t?"danger":void 0,icon:t?i.createElement(It.A,null):i.createElement(_t.A,null),onClick:p,checked:!!t,size:s},m):i.createElement(fe.A,{key:a+f,checkedChildren:l||n,unCheckedChildren:t&&l||n,onChange:d,checked:!!t,size:s})},ValueSources:$t,confirm:function(e){Ht(e)},Provider:function(e){var t=e.config,r=e.children;return i.createElement(d.Ay,{locale:t.settings.locale.antd},r)}};function Kt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Jt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Kt(Object(r),!0).forEach((function(t){(0,o.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Kt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Qt=Jt(Jt({},u.d$.settings),{},{renderField:function(e,t){return(0,t.RCE)(t.W.FieldSelect,e)},renderOperator:function(e,t){return(0,t.RCE)(t.W.FieldSelect,e)},renderFunc:function(e,t){return(0,t.RCE)(t.W.FieldSelect,e)},renderConjs:function(e,t){return(0,t.RCE)(t.W.Conjs,e)},renderSwitch:function(e,t){return(0,t.RCE)(t.W.Switch,e)},renderButton:function(e,t){return(0,t.RCE)(t.W.Button,e)},renderIcon:function(e,t){return(0,t.RCE)(t.W.Icon,e)},renderButtonGroup:function(e,t){return(0,t.RCE)(t.W.ButtonGroup,e)},renderValueSources:function(e,t){return(0,t.RCE)(t.W.ValueSources,e)},renderFieldSources:function(e,t){return(0,t.RCE)(t.W.ValueSources,e)},renderProvider:function(e,t){return(0,t.RCE)(t.W.Provider,e)},renderConfirm:function(e,t){return(0,t.W.confirm)(e)},locale:Jt({},u.d$.settings.locale),removeInvalidMultiSelectValuesOnLoad:!1,normalizeListValues:function(){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=this.utils.normalizeListValues).call.apply(e,[null].concat(r))}}),Xt=Jt(Jt({},u.d$.widgets),{},{text:Jt(Jt({},u.d$.widgets.text),{},{factory:function(e,t){return(0,t.RCE)(t.W.TextWidget,e)}}),textarea:Jt(Jt({},u.d$.widgets.textarea),{},{factory:function(e,t){return(0,t.RCE)(t.W.TextAreaWidget,e)}}),number:Jt(Jt({},u.d$.widgets.number),{},{factory:function(e,t){return(0,t.RCE)(t.W.NumberWidget,e)}}),multiselect:Jt(Jt({},u.d$.widgets.multiselect),{},{factory:function(e,t){var r=t.RCE,n=t.W,l=n.AutocompleteWidget,o=n.MultiSelectWidget;return e.asyncFetch||e.showSearch?r(l,Jt(Jt({},e),{},{multiple:!0})):r(o,e)}}),select:Jt(Jt({},u.d$.widgets.select),{},{factory:function(e,t){var r=t.RCE,n=t.W,l=n.AutocompleteWidget,o=n.SelectWidget;return e.asyncFetch||e.showSearch||e.allowCustomValues?r(l,e):r(o,e)}}),slider:Jt(Jt({},u.d$.widgets.slider),{},{factory:function(e,t){return(0,t.RCE)(t.W.SliderWidget,e)}}),boolean:Jt(Jt({},u.d$.widgets.boolean),{},{factory:function(e,t){return(0,t.RCE)(t.W.BooleanWidget,e)}}),date:Jt(Jt({},u.d$.widgets.date),{},{factory:function(e,t){return(0,t.RCE)(t.W.DateWidget,e)}}),time:Jt(Jt({},u.d$.widgets.time),{},{factory:function(e,t){return(0,t.RCE)(t.W.TimeWidget,e)}}),datetime:Jt(Jt({},u.d$.widgets.datetime),{},{factory:function(e,t){return(0,t.RCE)(t.W.DateTimeWidget,e)}}),rangeslider:Jt(Jt({},u.d$.widgets.rangeslider),{},{factory:function(e,t){return(0,t.RCE)(t.W.RangeWidget,e)}}),treeselect:Jt(Jt({},u.d$.widgets.treeselect),{},{factory:function(e,t){return(0,t.RCE)(t.W.TreeSelectWidget,e)}}),treemultiselect:Jt(Jt({},u.d$.widgets.treemultiselect),{},{factory:function(e,t){return(0,t.RCE)(t.W.TreeSelectWidget,Jt(Jt({},e),{},{treeMultiple:!0}))}})}),Zt=Jt({},u.d$.types),er=Jt(Jt({},u.d$.ctx),{},{utils:Jt(Jt({},u.d$.ctx.utils),{},{normalizeListValues:function(e,t,r){var n=["treeselect","treemultiselect"].includes(t),l=["multiselect","treemultiselect"].includes(t);return n&&(e=function(e,t,r){var n,l=Ve(e);try{for(l.s();!(n=l.n()).done;){var o=n.value;if(o.path=Me(e,o.value),0!=t.treeSelectOnlyLeafs){var a=Ne(e,o.value);r||(o.selectable=0==a.length)}}}catch(e){l.e(e)}finally{l.f()}return e}(e=function(e){var t,r,n=Be,l=function(e,o,a){if(e.children){1==a&&(e[n.pId]=n.rootPId);var i,u=e.children.length,c=Ve(e.children);try{for(c.s();!(i=c.n()).done;){var s=i.value;s[n.pId]=e[n.id],t++,o.splice(t,0,s),r++,l(s,o,a+1)}}catch(e){c.e(e)}finally{c.f()}delete e.children,0==u&&(o.splice(t,1),t--,r--)}};if(Array.isArray(e))for(r=e.length,t=0;t<r;t++){var o=e[t];_e(o)&&(void 0!==o[n.pId]&&o[n.pId]!=n.rootPId||l(o,e,1))}return e}(e=Ie(e)),r,l)),e}}),W:Jt(Jt({},u.d$.ctx.W),Yt)}),tr=Jt(Jt({},u.d$),{},{ctx:er,types:Zt,widgets:Xt,settings:Qt});const rr=tr=u.Aq.ConfigMixins.addMixins(tr,["rangeslider","treeselect","treemultiselect","rangeable__date"]);var nr=r(97632),lr=r(95957),or=r(65861),ar=r(76147),ir=r(79040),ur=r(6277),cr=r(32861),sr=r(60169),dr=r(34982),pr=r(77421),fr=r(12543),mr=r(5866),vr=r.n(mr),gr=r(98697),yr=r(97306),hr=u.Aq.ListUtils.mapListValues,br=r(63326),Er=["width"],Ar=["width"],Or=r(51343),wr=r(20327),Sr=r(5721),Cr=r(25856),xr=r(91043),kr=u.Aq.ListUtils.mapListValues,jr=r(87050),Pr=r(25775),Rr=r(2455),Tr=r(30460),Fr=r(62649),Wr=r(17337),Vr=r(49159),Lr=r(93755),Dr=["width"];function qr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ir(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?qr(Object(r),!0).forEach((function(t){(0,o.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var _r=u.Rj.W,Br=i.createElement(Vr.A,{fontSize:"small",style:{marginRight:10,marginTop:4}}),Mr=i.createElement(Lr.A,{fontSize:"small",style:{marginRight:10,marginTop:4}}),Nr=[];const Ur=function(e){var t=e.allowCustomValues,r=e.multiple,n=e.disableClearable,o=e.value,a=e.customProps,u=e.readonly,c=e.config,s=e.filterOptionsConfig,d=e.errorText,p={stringify:(0,i.useCallback)((function(e){return c.settings.listKeysForSearch.map((function(t){return"string"==typeof e[t]?e[t]:""})).join("\0")}),[c])},f=(0,jr.Z)(s||p),m=_r(e,{debounceTimeout:100,multiple:r,uif:"mui"}),v=m.open,g=m.onOpen,y=m.onClose,h=m.onChange,b=m.onInputChange,E=m.inputValue,A=m.options,O=m.isInitialLoading,w=m.isLoading,S=m.aPlaceholder,C=m.extendOptions,x=m.getOptionSelected,k=m.getOptionDisabled,j=m.getOptionIsCustom,P=m.getOptionLabel,R=m.selectedListValue,T=c.settings,F=T.defaultSelectWidth,W=T.defaultSearchWidth,V=a||{},L=V.width,D=(0,oe.A)(V,Dr),q=D.input||{},I=q.width||W;q=M()(q,["width"]);var _=M()(D,["showSearch","showCheckboxes"]),B=!0,N=L||F,U={width:r?void 0:N,minWidth:N},z=u?"":S,G=z||c.settings.fieldPlaceholder,$=null!=o?o:r?Nr:null,H=(0,Wr.A)((function(e){return{input:{minWidth:I+" !important"}}})),Y=(0,Wr.A)((function(e){return{root:{height:"auto"},label:{marginTop:"3px",marginBottom:"3px"}}}))(),K=H();return i.createElement(sr.A,{fullWidth:B},i.createElement(Pr.Ay,(0,l.A)({disableClearable:n,disableCloseOnSelect:r,fullWidth:B,multiple:r,style:U,classes:K,freeSolo:t,loading:O,open:v,onOpen:g,onClose:y,inputValue:E,onInputChange:b,label:z,onChange:h,value:$,getOptionSelected:x,disabled:u,readOnly:u,options:A,groupBy:function(e){return null==e?void 0:e.groupTitle},getOptionLabel:P,getOptionDisabled:k,renderInput:function(e){var t,n=!r&&!v,o=null!==(t=null==R?void 0:R.title)&&void 0!==t?t:"",a=n?o:r&&!v?"":null!=E?E:"";return i.createElement(cr.A,(0,l.A)({},e,{inputProps:Ir(Ir({},e.inputProps),{},{value:a,"aria-label":G}),InputProps:Ir(Ir({},e.InputProps),{},{readOnly:u,endAdornment:i.createElement(i.Fragment,null,w?i.createElement(Rr.A,{color:"inherit",size:20}):null,e.InputProps.endAdornment)}),disabled:u,placeholder:z,"aria-label":z,error:!!d},q))},renderTags:function(e,t){return e.map((function(e,r){var n=j(e)?"customSelectOption":void 0,o=i.createElement("span",{className:n},P(e));return i.createElement(Tr.A,(0,l.A)({key:e.value,classes:Y,label:o,size:"small"},t({index:r})))}))},renderOption:function(e,t){var n=t.selected,l=e.title,o=e.renderTitle,a=(e.value,e.specialValue),u=e.isHidden,c=j(e)?"customSelectOption":void 0,s=i.createElement("span",{className:c},o||l);return u?null:r?a?i.createElement(Fr.A,null,o||l):i.createElement(Fr.A,null,n?Mr:Br,s):a?i.createElement(i.Fragment,null,o||l):i.createElement(i.Fragment,null,s)},filterOptions:function(e,t){var r=f(e,t);return C(r)}},_)))};var zr=r(89881),Gr=["items","selectedKey","setField","isValueField"];function $r(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Hr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?$r(Object(r),!0).forEach((function(t){(0,o.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$r(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Yr={key:"_value2",path:"value",label:"title",altLabel:"_altLabel",tooltip:"tooltip",grouplabel:"groupTitle"},Kr=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.map((function(e){var r=e.items,n=e.path,l=e.key,o=e.label,a=e.altLabel,u=e.disabled,c=e.grouplabel,s=e.matchesType,d=e.tooltip,p="  ".repeat(t);return r?Kr(r,t+1):{title:o,renderTitle:s?i.createElement("b",null,p+o):p+o,value:n,disabled:u,groupTitle:t>0?p+c:null,tooltip:d,_value2:l,_altLabel:a}})).flat(1/0)},Jr=r(81553),Qr=r(14143),Xr=r(38314),Zr=r(27553),en=u.Aq.DragIcon,tn={delGroup:i.createElement(Jr.A,null),delRuleGroup:i.createElement(Jr.A,null),delRule:i.createElement(Jr.A,null),addSubRuleSimple:i.createElement(Qr.A,null),addSubRule:i.createElement(Qr.A,null),addSubGroup:i.createElement(Qr.A,null),addRule:i.createElement(Qr.A,null),addGroup:i.createElement(Qr.A,null),drag:i.createElement(Xr.A,null)},rn={drag:"inherit"},nn=r(41639),ln=r(77545),on={addSubRuleSimple:!0,delGroup:!0,delRuleGroup:!0,delRule:!0},an={addRule:"primary",addGroup:"primary",delGroup:"secondary",delRuleGroup:"secondary",delRule:"secondary"},un=r(88393),cn=r(15481),sn=r(1009),dn=r(30089),pn=r(17827),fn=r(71773),mn=r(68417),vn=r(42151),gn=r(5429),yn=(0,Wr.A)((function(e){return{paper:{padding:e.spacing(1)}}}));const hn={MaterialTextWidget:function(e){var t=e.value,r=e.setValue,n=(e.config,e.readonly),o=e.placeholder,a=e.customProps,u=e.maxLength,c=t||"";return i.createElement(sr.A,null,i.createElement(cr.A,(0,l.A)({value:c,placeholder:n?"":o,InputProps:{readOnly:n},inputProps:{maxLength:u},disabled:n,onChange:function(e){var t=e.target.value;""===t&&(t=void 0),r(t)}},a)))},MaterialTextAreaWidget:function(e){var t=e.value,r=e.setValue,n=e.config,o=e.readonly,a=e.placeholder,u=e.customProps,c=e.maxLength,s=e.maxRows,d=e.fullWidth,p=n.settings.defaultMaxRows,f=t||"";return i.createElement(sr.A,{fullWidth:d},i.createElement(cr.A,(0,l.A)({fullWidth:d,maxRows:s||p,multiline:!0,value:f,placeholder:o?"":a,InputProps:{readOnly:o},inputProps:{maxLength:c},disabled:o,onChange:function(e){var t=e.target.value;""===t&&(t=void 0),r(t)}},u)))},MaterialDateWidget:function(e){var t,r,n,o=e.value,a=e.setValue,u=e.readonly,c=e.customProps,s=e.dateFormat,d=e.valueFormat,p=e.placeholder,f=(null!==(t=window)&&void 0!==t&&t.matchMedia?null===(r=(n=window).matchMedia)||void 0===r?void 0:r.call(n,"(pointer:fine), (pointer:none)").matches:e.useKeyboard)?dr.s:dr.l;return i.createElement(sr.A,null,i.createElement(f,(0,l.A)({readOnly:u,disabled:u,placeholder:u?"":p,format:s,value:o||null,onChange:function(e){a(function(e){return e&&e.isValid()?e.format(d):void 0}(e))}},c)))},MaterialDateTimeWidget:function(e){var t,r,n,o=e.value,a=e.setValue,u=e.use12Hours,c=e.readonly,s=e.placeholder,d=e.dateFormat,p=e.timeFormat,f=e.valueFormat,m=e.customProps,v=(null!==(t=window)&&void 0!==t&&t.matchMedia?null===(r=(n=window).matchMedia)||void 0===r?void 0:r.call(n,"(pointer:fine), (pointer:none)").matches:e.useKeyboard)?pr.d:pr.K,g=d+" "+p;return i.createElement(sr.A,null,i.createElement(v,(0,l.A)({readOnly:c,disabled:c,ampm:!!u,placeholder:c?"":s,format:g,value:o||null,onChange:function(e){a(function(e){return e&&e.isValid()?e.format(f):void 0}(e))}},m)))},MaterialTimeWidget:function(e){var t,r,n,o=e.value,a=e.setValue,u=e.use12Hours,c=e.readonly,s=e.placeholder,d=e.timeFormat,p=e.valueFormat,f=e.customProps,m=(null!==(t=window)&&void 0!==t&&t.matchMedia?null===(r=(n=window).matchMedia)||void 0===r?void 0:r.call(n,"(pointer:fine), (pointer:none)").matches:e.useKeyboard)?fr.n:fr.A,v=-1!=d.indexOf(":ss"),g=o?vr()(o,d):null;return i.createElement(sr.A,null,i.createElement(m,(0,l.A)({readOnly:c,disabled:c,ampm:!!u,placeholder:c?"":s,format:d,value:g||null,onChange:function(e){a(function(e){return e&&e.isValid()?e.format(p):void 0}(e))},views:v?["hours","minutes","seconds"]:["hours","minutes"]},f)))},MaterialSelectWidget:function(e){var t=e.listValues,r=e.value,n=e.setValue,o=(e.allowCustomValues,e.readonly),a=e.placeholder,u=e.customProps,c=null!=r;return i.createElement(sr.A,null,i.createElement(gr.A,(0,l.A)({autoWidth:!0,displayEmpty:!0,label:o?"":a,onChange:function(e){void 0!==e.target.value&&n(e.target.value)},value:c?r:"",disabled:o,readOnly:o,renderValue:function(e){return o||null!=e?function(e){return hr(t,(function(t){var r=t.title;return t.value===e?r:null})).filter((function(e){return null!==e})).shift()}(e):a}},M()(u,["showSearch","input"])),hr(t,(function(e){var t=e.title,r=e.value;return i.createElement(yr.A,{key:r,value:r},t)}))))},MaterialNumberWidget:function(e){var t=e.value,r=e.setValue,n=(e.config,e.readonly),o=e.min,a=e.max,u=e.step,c=e.placeholder,s=e.customProps,d=null==t?"":t;return i.createElement(sr.A,null,i.createElement(cr.A,(0,l.A)({type:"number",value:d,placeholder:n?"":c,InputProps:{readOnly:n},inputProps:{min:o,max:a,step:u},disabled:n,onChange:function(e){var t=e.target.value;t=""===t||null===t?void 0:Number(t),r(t)}},s)))},MaterialSliderWidget:function(e){var t=e.config,r=e.placeholder,n=e.customProps,o=e.value,a=e.setValue,u=e.min,c=e.max,s=e.step,d=e.marks,p=e.readonly,f=t.settings.defaultSliderWidth,m=n||{},v=m.width,g=(0,oe.A)(m,Er),y=g.input||{},h=g.slider||g,b="number"==typeof o?o:"",E="number"==typeof o?o:null,A=!!d&&Object.keys(d).map((function(e){return{value:e,label:d[e]}})),O=i.createElement(cr.A,(0,l.A)({type:"number",value:b,placeholder:r,InputProps:{readOnly:p},inputProps:{min:u,max:c,step:s},disabled:p,onChange:function(e){var t=e.target.value;t=""===t||null===t?void 0:Number(t),a(t)},onBlur:function(){o<u?a(u):o>c&&a(c)}},y)),w=i.createElement(br.A,(0,l.A)({value:E,onChange:function(e,t){a(t)},disabled:p,min:u,max:c,step:s,marks:A,valueLabelDisplay:"auto"},h)),S={marginLeft:"5px",paddingLeft:"12px",marginBottom:A&&"-16px",width:v||f};return i.createElement(sr.A,null,i.createElement("div",{style:{display:"inline-flex",alignItems:"center",flexWrap:"wrap"}},i.createElement("div",{style:{marginLeft:"5px"}},O),i.createElement("div",{style:S},w)))},MaterialRangeWidget:function(e){var t=e.config,r=e.placeholders,n=e.customProps,o=e.value,u=e.setValue,c=e.min,s=e.max,d=e.step,p=e.marks,f=e.readonly,m=e.textSeparators,v=t.settings.defaultSliderWidth;(0,i.useEffect)((function(){var t=e.value||[void 0,void 0],r=(0,a.A)(t,2);r[0],r[1],e.value}),[]);var g=function(){o&&(o[0]<c?u([c,o[1]]):o[1]>s&&u([o[0],s]))},y=n||{},h=y.width,b=(0,oe.A)(y,Ar),E=b.input||{},A=b.slider||b,O=!!p&&Object.keys(p).map((function(e){return{value:e,label:p[e]}})),w=o?(0,ce.A)(o):[void 0,void 0],S=(0,a.A)(w,2),C=S[0],x=S[1];null==C&&(C="",w[0]=0),null==x&&(x="",w[1]=0);var k=i.createElement(cr.A,(0,l.A)({type:"number",value:C,placeholder:r[0],InputProps:{readOnly:f},inputProps:{min:c,max:s,step:d},disabled:f,onChange:function(t){var r=t.target.value;r=""===r||null==r?void 0:Number(r);var n=e.value?(0,ce.A)(e.value):[void 0,void 0];n[0]=r,u(n)},onBlur:g},E)),j=i.createElement(cr.A,(0,l.A)({type:"number",value:x,placeholder:r[1],InputProps:{readOnly:f},inputProps:{min:c,max:s,step:d},disabled:f,onChange:function(t){var r=t.target.value;r=""===r||null==r?void 0:Number(r);var n=e.value?(0,ce.A)(e.value):[void 0,void 0];n[1]=r,u(n)},onBlur:g},E)),P=i.createElement(br.A,(0,l.A)({value:w,onChange:function(e,t){u(t)},disabled:f,min:c,max:s,step:d,marks:O,valueLabelDisplay:"auto"},A)),R={marginLeft:"5px"},T={marginLeft:"5px",paddingLeft:"12px",marginBottom:O&&"-16px",width:h||v};return i.createElement(sr.A,null,i.createElement("div",{style:{display:"inline-flex",flexWrap:"wrap"}},i.createElement("div",{style:R},k),i.createElement("div",{className:"widget--sep"},i.createElement("span",null,m[1])),i.createElement("div",{style:R},j),i.createElement("div",{style:T},P)))},MaterialBooleanWidget:function(e){var t=e.customProps,r=e.value,n=e.setValue,o=e.labelYes,a=e.labelNo,u=e.readonly;return i.createElement(sr.A,null,i.createElement(Sr.A,{component:"div"},i.createElement(wr.A,{component:"label",container:!0,alignItems:"center",spacing:0},i.createElement(wr.A,{item:!0,component:"span"},a),i.createElement(wr.A,{item:!0,component:"span"},i.createElement(Or.A,(0,l.A)({checked:!!r,onChange:function(){n(!r)},disabled:u},t))),i.createElement(wr.A,{item:!0,component:"span"},o))))},MaterialMultiSelectWidget:function(e){var t,r=e.listValues,n=e.value,o=e.setValue,a=(e.allowCustomValues,e.readonly),u=e.placeholder,c=e.customProps,s=null!=n&&n.length>0;return i.createElement(sr.A,null,i.createElement(gr.A,(0,l.A)({multiple:!0,autoWidth:!0,displayEmpty:!0,label:a?"":u,onChange:function(e){void 0!==e.target.value&&o(e.target.value)},value:s?n:[],disabled:a,readOnly:a,renderValue:function(e){if(!a&&!e.length)return u;var t=kr(r,(function(t){var r=t.title,n=t.value;return e.indexOf(n)>-1?r:null})).filter((function(e){return null!==e}));return t.join(", ")}},M()(c,["showSearch","input","showCheckboxes"])),(t=s?n:[],kr(r,(function(e){var r=e.title,n=e.value;return i.createElement(yr.A,{key:n,value:n},i.createElement(Cr.A,{checked:t.indexOf(n)>-1}),i.createElement(xr.A,{primary:r}))})))))},MaterialAutocompleteWidget:Ur,MaterialFieldSelect:function(e){var t=e.items,r=e.setField,n=e.selectedKey,l=e.readonly,o=e.placeholder,a=e.errorText,u=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.map((function(e){var r=e.items,n=e.path,l=e.label,o=e.disabled,a=e.matchesType,c="  ".repeat(t);return r?[i.createElement(zr.A,{disabled:o,key:n,disableSticky:!0},c&&i.createElement("span",null,c),l),u(r,t+1)]:i.createElement(yr.A,{disabled:o,key:n,value:n},c&&i.createElement("span",null,c),a?i.createElement("b",null,l):l)}))},c=null!=n;return i.createElement(sr.A,null,i.createElement(gr.A,{error:!!a,autoWidth:!0,displayEmpty:!0,label:o,onChange:function(e){void 0!==e.target.value&&r(e.target.value)},value:c?n:"",disabled:l,renderValue:function(e){if(!l&&!e)return o;var r=function(t){return t.map((function(t){return t.items?r(t.items):t.path===e?t.label:null}))};return r(t).filter((function(e){return Array.isArray(e)?e.some((function(e){return null!==e})):null!==e})).pop()}},u(t)))},MaterialFieldAutocomplete:function(e){return i.createElement(Ur,function(e,t){var r=e.items,n=e.selectedKey,l=e.setField,o=e.isValueField,a=(0,oe.A)(e,Gr),u=Kr(r),c=n,s={stringify:(0,i.useCallback)((function(e){return t.settings.fieldItemKeysForSearch.map((function(e){return Yr[e]})).map((function(t){return"string"==typeof e[t]?e[t]:""})).join("\0")}),[t])};return Hr(Hr({},a),{},{listValues:u,setValue:function(e,t){if(e||o)return l(e)},filterOptionsConfig:s,allowCustomValues:!1,multiple:!1,disableClearable:!o,value:c,isFieldAutocomplete:!0})}(e,e.config))},MaterialIcon:function(e){var t=e.type,r=e.readonly,n=tn[t]||null;return n||"drag"!==t?"drag"===t?i.createElement(Zr.A,{size:"small",disabled:r,color:rn[t]},n):n:i.createElement(en,null)},MaterialButton:function(e){var t=e.type,r=e.label,n=e.onClick,l=e.readonly,o=e.renderIcon,a=null==o?void 0:o({type:t,readonly:l});return!r||on[t]?i.createElement(ln.A,{size:"small",disabled:l,onClick:n,color:an[t],"aria-label":r},a):i.createElement(nn.A,{size:"small",disabled:l,onClick:n,color:an[t],startIcon:a},r)},MaterialButtonGroup:function(e){var t=e.children;return e.config,i.createElement(i.Fragment,null,t)},MaterialConjs:function(e){var t=e.id,r=e.not,n=e.setNot,l=e.conjunctionOptions,o=e.setConjunction,a=e.disabled,u=e.readonly,c=e.config,s=e.showNot,d=e.notLabel,p=Object.keys(l).length,f=a,m=c.settings.forceShowConj||p>1&&!f,v=function(e){return o(e)};return i.createElement(sr.A,null,i.createElement(un.A,{disableElevation:!0,variant:"contained",size:"small",disabled:u},s&&(u&&!r?null:i.createElement(nn.A,{key:t,id:t+"__not",color:r?"secondary":"default",onClick:function(e){return n(e)}.bind(null,!r),disabled:u},d||"NOT")),m&&Object.keys(l).map((function(e){var t=l[e],r=t.id,n=(t.name,t.label),c=t.checked,s=o.isDummyFn?"__dummy":"";return!u&&!a||c?i.createElement(nn.A,{key:r+s,id:r+s,color:c?"primary":"default",value:e,onClick:v.bind(null,e),disabled:u||a},n):null}))))},MaterialSwitch:function(e){var t=e.value,r=e.setValue,n=e.label,l=e.checkedLabel,o=e.hideLabel,a=e.id,u=e.config,c=e.type,s=(u.settings.renderSize,function(){return r(!t)}),d=c,p=t&&l||n,f=t?i.createElement(dn.A,null):i.createElement(sn.A,null);return"lock"==c?o?i.createElement(ln.A,{key:a+d,onClick:s,size:"small"},f):i.createElement(nn.A,{key:a+d,onClick:s,size:"small",startIcon:f},p):i.createElement(cn.A,{control:i.createElement(Or.A,{checked:!!t,size:"small",onChange:function(e){return r(e.target.checked)}}),label:p})},MaterialValueSources:function(e){var t=e.valueSources,r=e.valueSrc,n=e.title,l=e.setValueSrc,o=(e.readonly,i.useState(null)),u=(0,a.A)(o,2),c=u[0],s=u[1],d=yn(),p=function(){s(null)},f=Boolean(c);return i.createElement("div",null,i.createElement(ln.A,{size:"small",onClick:function(e){c?p():function(e){s(e.currentTarget)}(e)}},i.createElement(pn.A,null)),i.createElement(fn.Ay,{open:f,anchorEl:c,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},onClose:p,classes:{paper:d.paper},disablePortal:!0},i.createElement(sr.A,{component:"fieldset"},i.createElement(gn.A,{component:"legend"},n),i.createElement(vn.A,{value:r||"value",onChange:function(e){void 0!==e.target.value&&(l(e.target.value),p())}},function(e){return e.map((function(e){var t=(0,a.A)(e,2),n=t[0],l=t[1];return i.createElement(cn.A,{key:n,value:n,checked:r==n||!r&&"value"==n,control:i.createElement(mn.A,null),label:l.label})}))}(t)))))},MaterialConfirm:function(e){var t=e.onOk,r=e.okText,n=e.cancelText,l=e.title;(0,e.confirmFn)({description:l||"Are you sure?",title:null,confirmationText:r||"Ok",cancellationText:n||"Cancel"}).then(t).catch((function(){}))},MaterialUseConfirm:ar.S,MaterialProvider:function(e){var t=e.config,r=e.children,n=t.settings.theme||{},l=t.settings.locale||{},o=n.material,a=l.material,u=o||a?(0,lr.A)(o,a):null,c=i.createElement("div",{className:"mui"},r),s=i.createElement(ir.M,{utils:ur.A},i.createElement(ar.a,null,c));return u?i.createElement(or.A,{theme:u},s):s}};function bn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function En(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?bn(Object(r),!0).forEach((function(t){(0,o.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var An=En(En({},u.d$.settings),{},{renderField:function(e,t){var r,n=t.RCE,l=t.W,o=l.MaterialFieldAutocomplete,a=l.MaterialFieldSelect;return null!=e&&null!==(r=e.customProps)&&void 0!==r&&r.showSearch?n(o,e):n(a,e)},renderOperator:function(e,t){var r,n=t.RCE,l=t.W,o=l.MaterialFieldAutocomplete,a=l.MaterialFieldSelect;return null!=e&&null!==(r=e.customProps)&&void 0!==r&&r.showSearch?n(o,e):n(a,e)},renderFunc:function(e,t){return(0,t.RCE)(t.W.MaterialFieldSelect,e)},renderConjs:function(e,t){return(0,t.RCE)(t.W.MaterialConjs,e)},renderSwitch:function(e,t){return(0,t.RCE)(t.W.MaterialSwitch,e)},renderButton:function(e,t){return(0,t.RCE)(t.W.MaterialButton,e)},renderIcon:function(e,t){return(0,t.RCE)(t.W.MaterialIcon,e)},renderButtonGroup:function(e,t){return(0,t.RCE)(t.W.MaterialButtonGroup,e)},renderValueSources:function(e,t){return(0,t.RCE)(t.W.MaterialValueSources,e)},renderFieldSources:function(e,t){return(0,t.RCE)(t.W.MaterialValueSources,e)},renderProvider:function(e,t){return(0,t.RCE)(t.W.MaterialProvider,e)},renderConfirm:function(e,t){return(0,t.W.MaterialConfirm)(e)},useConfirm:function(e){return(0,e.W.MaterialUseConfirm)()}}),On=En(En({},u.d$.widgets),{},{text:En(En({},u.d$.widgets.text),{},{factory:function(e,t){return(0,t.RCE)(t.W.MaterialTextWidget,e)}}),textarea:En(En({},u.d$.widgets.textarea),{},{factory:function(e,t){return(0,t.RCE)(t.W.MaterialTextAreaWidget,e)}}),number:En(En({},u.d$.widgets.number),{},{factory:function(e,t){return(0,t.RCE)(t.W.MaterialNumberWidget,e)}}),multiselect:En(En({},u.d$.widgets.multiselect),{},{factory:function(e,t){var r=t.RCE,n=t.W,l=n.MaterialAutocompleteWidget,o=n.MaterialMultiSelectWidget;return e.asyncFetch||e.showSearch||e.allowCustomValues?r(l,En(En({},e),{},{multiple:!0})):r(o,e)}}),select:En(En({},u.d$.widgets.select),{},{factory:function(e,t){var r=t.RCE,n=t.W,l=n.MaterialAutocompleteWidget,o=n.MaterialSelectWidget;return e.asyncFetch||e.showSearch||e.allowCustomValues?r(l,e):r(o,e)}}),slider:En(En({},u.d$.widgets.slider),{},{factory:function(e,t){return(0,t.RCE)(t.W.MaterialSliderWidget,e)}}),boolean:En(En({},u.d$.widgets.boolean),{},{factory:function(e,t){return(0,t.RCE)(t.W.MaterialBooleanWidget,e)}}),date:En(En({},u.d$.widgets.date),{},{factory:function(e,t){return(0,t.RCE)(t.W.MaterialDateWidget,e)}}),time:En(En({},u.d$.widgets.time),{},{factory:function(e,t){return(0,t.RCE)(t.W.MaterialTimeWidget,e)}}),datetime:En(En({},u.d$.widgets.datetime),{},{factory:function(e,t){return(0,t.RCE)(t.W.MaterialDateTimeWidget,e)}}),rangeslider:En(En({},u.d$.widgets.rangeslider),{},{factory:function(e,t){return(0,t.RCE)(t.W.MaterialRangeWidget,e)}})}),wn=En({},u.d$.types),Sn=En(En({},u.d$.ctx),{},{W:En(En({},u.d$.ctx.W),hn)}),Cn=En(En({},u.d$),{},{ctx:Sn,types:wn,widgets:On,settings:An});const xn=Cn=u.Aq.ConfigMixins.addMixins(Cn,["rangeslider"]);var kn=r(76292),jn=u.Aq.moment,Pn=r(72696),Rn=r(80352),Tn=r(75846),Fn=r(47203),Wn=u.Aq.ListUtils.mapListValues,Vn=r(90395),Ln=r(77647),Dn=r(11511),qn=r(64255),In=u.Aq.uuid,_n=u.Aq.ListUtils.mapListValues,Bn=u.Aq.DragIcon,Mn={delGroup:qn.BeE,delRuleGroup:qn.BeE,delRule:qn.BeE,addSubRuleSimple:qn.QLR,addSubRule:qn.QLR,addSubGroup:qn.QLR,addRule:qn.QLR,addGroup:qn.QLR,drag:qn.t6y},Nn={addSubRuleSimple:!0,delRuleGroup:!0,delRule:!0},Un={addRule:"primary",addGroup:"primary",delGroup:"danger",delRuleGroup:"danger",delRule:"danger"};const zn={BootstrapTextWidget:function(e){var t=e.value,r=e.setValue,n=(e.config,e.readonly),l=e.placeholder,o=e.maxLength,a=t||"";return i.createElement(kn.A,{type:"text",bsSize:"sm",value:a,placeholder:l,disabled:n,onChange:function(e){var t=e.target.value;""===t&&(t=void 0),r(t)},maxLength:o})},BootstrapTextAreaWidget:function(e){var t=e.value,r=e.setValue,n=(e.config,e.readonly),l=e.placeholder,o=e.maxLength,a=(e.maxRows,e.fullWidth),u=t||"";return i.createElement(kn.A,{type:"textarea",bsSize:"sm",value:u,placeholder:l,disabled:n,onChange:function(e){var t=e.target.value;""===t&&(t=void 0),r(t)},maxLength:o,style:{width:a?"100%":void 0}})},BootstrapDateWidget:function(e){var t=e.value,r=e.setValue,n=(e.config,e.valueFormat,e.readonly);return i.createElement(kn.A,{type:"date",bsSize:"sm",value:t||"",disabled:n,onChange:function(e){var t=e.target.value;""==t&&(t=void 0),r(t)}})},BootstrapDateTimeWidget:function(e){var t,r=e.value,n=e.setValue,l=(e.config,e.valueFormat),o=(e.use12Hours,e.readonly);return t=r?jn(r).format("YYYY-MM-DDTHH:mm"):"",i.createElement(kn.A,{type:"datetime-local",bsSize:"sm",value:t,disabled:o,onChange:function(e){var t=e.target.value;t=""==t?void 0:jn(new Date(t)).format(l),n(t)}})},BootstrapTimeWidget:function(e){var t=e.value,r=e.setValue,n=(e.config,e.valueFormat,e.use12Hours,e.readonly);return i.createElement(kn.A,{type:"time",bsSize:"sm",value:t||"",disabled:n,onChange:function(e){var t=e.target.value;""==t&&(t=void 0),r(t)}})},BootstrapSelectWidget:function(e){var t=e.listValues,r=e.value,n=e.setValue,l=(e.allowCustomValues,e.readonly),o=e.placeholder,u=function(e){void 0!==e.target.value&&n(e.target.value)},c=null!=r,s=(0,i.useState)(!1),d=(0,a.A)(s,2),p=d[0],f=d[1];return i.createElement(Rn.A,{isOpen:p,onClick:function(){return f(!p)},disabled:l,toggle:function(){return f(!p)}},i.createElement(Tn.A,{tag:"button",className:"form-select",style:{lineHeight:"105%",minHeight:"1.7rem",paddingBottom:"0.45rem"},color:"transparent"},c?function(e){return l||null!=e?function(e){return Wn(t,(function(t){var r=t.title;return t.value===e?r:null})).filter((function(e){return null!==e})).shift()}(e):o}(r):i.createElement("span",null," ")),i.createElement(Fn.A,{container:"body",style:{}},!c&&i.createElement(Pn.A,{disabled:!0,value:""}),Wn(t,(function(e){var t=e.title,n=e.value;return i.createElement(Pn.A,{key:n,onClick:u,value:n,active:r==n},t)}))))},BootstrapNumberWidget:function(e){var t=e.value,r=e.setValue,n=(e.config,e.readonly),l=e.min,o=e.max,a=e.step,u=e.placeholder,c=null==t?"":t;return i.createElement(kn.A,{type:"number",bsSize:"sm",value:c,placeholder:u,disabled:n,min:l,max:o,step:a,onChange:function(e){var t=e.target.value;t=""===t||null===t?void 0:Number(t),r(t)}})},BootstrapSliderWidget:function(e){var t=e.value,r=e.setValue,n=(e.config,e.readonly),l=e.min,o=e.max,a=e.step,u=e.placeholder,c=function(e){var t=e.target.value;t=""===t||null===t?void 0:Number(t),r(t)},s=null==t?"":t;return i.createElement("div",{style:{display:"inline-flex",flexWrap:"wrap"}},i.createElement(kn.A,{key:"number",bsSize:"sm",style:{marginLeft:"5px",display:"inline-flex",width:"auto"},type:"number",value:s,placeholder:u,disabled:n,min:l,max:o,step:a,onChange:c}),i.createElement(kn.A,{key:"range",bsSize:"sm",style:{marginLeft:"5px",display:"inline-flex",width:"auto",minWidth:"150px"},type:"range",value:s,disabled:n,min:l,max:o,step:a,onChange:c}))},BootstrapBooleanWidget:function(e){var t=e.value,r=e.setValue,n=(e.config,e.labelYes,e.labelNo,e.readonly),l=function(e){return r("true"==e.target.value)},o=In(),a=In();return i.createElement(i.Fragment,null,i.createElement(Vn.A,null,i.createElement(Ln.A,{id:o,value:!0,checked:!!t,disabled:n,color:!0===t?"success":"secondary",onClick:l,size:"sm"},i.createElement(Dn.g,{icon:qn.e68})),i.createElement(Ln.A,{id:a,value:!1,checked:!t,disabled:n,color:!1===t?"danger":"secondary",onClick:l,size:"sm"},i.createElement(Dn.g,{icon:qn.GRI}))))},BootstrapMultiSelectWidget:function(e){var t=e.listValues,r=e.value,n=e.setValue,l=(e.allowCustomValues,e.placeholder),o=e.readonly,u=(0,i.useState)(!1),c=(0,a.A)(u,2),s=c[0],d=c[1],p=(0,i.useState)(null!=r?r:[]),f=(0,a.A)(p,2),m=f[0],v=f[1],g=function(e){var r=y(e.target.value,t);0==r.length&&(r=void 0),n(r)},y=function(e,t){if(!e)return m;var r=[];return m.includes(e)?(r=m.filter((function(t){return t!==e})),v(r)):(r=[].concat((0,ce.A)(m),[e]),v(r)),r};return i.createElement(Rn.A,{isOpen:s,onClick:function(){return d(!s)},disabled:o,toggle:function(){return d(!s)}},i.createElement(Tn.A,{tag:"button",className:"form-select",style:{lineHeight:"105%",minHeight:"1.7rem",paddingBottom:"0.45rem"},color:"transparent"},m.length?function(e){if(!o&&!e.length)return l;var r=_n(t,(function(t){var r=t.title,n=t.value;return e.indexOf(n)>-1?r:null})).filter((function(e){return null!==e}));return r.join(", ")}(m):i.createElement("span",null," ")),i.createElement(Fn.A,{container:"body",style:{}},_n(t,(function(e){var t=e.title,r=e.value;return i.createElement(Pn.A,{key:r,onClick:g,value:r,active:m.some((function(e){return e===r}))},t)}))))},BootstrapFieldSelect:function(e){var t,r=e.items,n=e.setField,l=e.selectedKey,o=e.readonly,u=e.placeholder,c=e.errorText,s=(0,i.useState)(!1),d=(0,a.A)(s,2),p=d[0],f=d[1],m=function(e){void 0!==e.target.value&&n(e.target.value)},v=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Object.keys(e).map((function(n){var o=e[n],a=o.items,u=o.path,c=o.label,s=o.disabled,d=o.matchesType,p=r>0?"  ".repeat(r):"",f=r>1?"  ".repeat(r-1):"";if(a)return i.createElement("div",{key:"dropdown-itemGroup-".concat(u)},i.createElement(Pn.A,{header:!0,key:"".concat(u,"-header"),onClick:m,value:u},p+c),v(a,!0,r+1));var g=d?i.createElement("b",null,f+c):f+c;return i.createElement(Pn.A,{disabled:s,key:u,onClick:m,value:u,className:t?"px-4":void 0,active:l==u},g)}))},g=null!=l;return i.createElement(Rn.A,{isOpen:p,onClick:function(){return f(!p)},disabled:o,toggle:function(){return f(!p)}},i.createElement(Tn.A,{tag:"button",className:"form-select",style:{lineHeight:"105%",minHeight:"1.7rem",paddingBottom:"0.45rem"},color:"transparent"},g?function(e,t){var r;if(!o&&!t)return u;var n=function(e){for(var r in e){var l=e[r];if(l.path===t)return l;if(l.items){var o=n(l.items);if(o)return o}}};return(null===(r=n(e))||void 0===r?void 0:r.label)||t}(r,l):(t=u||c||"&nbsp;",c?i.createElement("span",{style:{color:"red"}},t):i.createElement("span",null,t))),i.createElement(Fn.A,{container:"body",style:{overflowY:"auto",maxHeight:"400px"}},!g&&i.createElement(Pn.A,{key:"body",disabled:!0,value:""}),v(r)))},BootstrapIcon:function(e){var t=e.type,r=Mn[t]&&i.createElement(Dn.g,{icon:Mn[t]})||null;return r||"drag"!==t||(r=i.createElement(Bn,null)),r},BootstrapButton:function(e){var t=e.type,r=e.label,n=e.onClick,l=e.renderIcon,o=e.readonly,a=(null==l?void 0:l({type:t,readonly:o}))||null,u=Nn[t]||!r;return n?i.createElement(Ln.A,{size:"sm",color:Un[t],onClick:n},a,!u&&r):a},BootstrapButtonGroup:function(e){var t=e.children;return e.config,i.createElement(Vn.A,null,t)},BootstrapConjs:function(e){var t=e.id,r=e.not,n=e.setNot,l=e.conjunctionOptions,o=e.setConjunction,a=e.disabled,u=e.readonly,c=e.config,s=e.showNot,d=e.notLabel,p=Object.keys(l).length,f=a,m=c.settings.forceShowConj||p>1&&!f,v=function(e){return o(e)};return i.createElement(Vn.A,{size:"sm",disabled:u},s&&(u&&!r?null:i.createElement(Ln.A,{key:t,id:t+"__not",size:"sm",color:r?"danger":"secondary",onClick:function(e){return n(e)}.bind(null,!r),disabled:u},d||"NOT")),m&&Object.keys(l).map((function(e){var t=l[e],r=t.id,n=(t.name,t.label),c=t.checked,s=o.isDummyFn?"__dummy":"";return!u&&!a||c?i.createElement(Ln.A,{key:r+s,id:r+s,size:"sm",color:c?"primary":"secondary",value:e,onClick:v.bind(null,e),disabled:u||a},n):null})))},BootstrapValueSources:function(e){e.config;var t=e.valueSources,r=e.valueSrc,n=(e.title,e.setValueSrc),l=e.readonly,o=(0,i.useState)(!1),u=(0,a.A)(o,2),c=u[0],s=u[1],d=function(e){void 0!==e.target.value&&n(e.target.value)};return i.createElement(Rn.A,{isOpen:c,onClick:function(){return s(!c)},disabled:l,toggle:function(){return s(!c)}},i.createElement(Tn.A,{tag:"span",className:"btn",style:{lineHeight:"105%",minHeight:"1.7rem",paddingBottom:"0.45rem"},color:"transparent"},i.createElement(Dn.g,{icon:qn.vaG})),i.createElement(Fn.A,{container:"body",style:{}},function(e){return e.map((function(e){var t=(0,a.A)(e,2),n=t[0],l=t[1];return i.createElement(Pn.A,{key:n,onClick:d,value:n,active:r==n},l.label||n)}))}(t)))},BootstrapConfirm:function(e){var t=e.onOk,r=(e.okText,e.cancelText,e.title);confirm(r)&&t()},BootstrapProvider:function(e){return e.config,e.children}};function Gn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function $n(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Gn(Object(r),!0).forEach((function(t){(0,o.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Gn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Hn=$n($n({},u.d$.settings),{},{renderField:function(e,t){return(0,t.RCE)(t.W.BootstrapFieldSelect,e)},renderOperator:function(e,t){return(0,t.RCE)(t.W.BootstrapFieldSelect,e)},renderFunc:function(e,t){return(0,t.RCE)(t.W.BootstrapFieldSelect,e)},renderConjs:function(e,t){return(0,t.RCE)(t.W.BootstrapConjs,e)},renderButton:function(e,t){return(0,t.RCE)(t.W.BootstrapButton,e)},renderIcon:function(e,t){return(0,t.RCE)(t.W.BootstrapIcon,e)},renderButtonGroup:function(e,t){return(0,t.RCE)(t.W.BootstrapButtonGroup,e)},renderValueSources:function(e,t){return(0,t.RCE)(t.W.BootstrapValueSources,e)},renderFieldSources:function(e,t){return(0,t.RCE)(t.W.BootstrapValueSources,e)},renderProvider:function(e,t){return(0,t.RCE)(t.W.BootstrapProvider,e)},renderConfirm:function(e,t){return(0,t.W.BootstrapConfirm)(e)}}),Yn=$n($n({},u.d$.widgets),{},{text:$n($n({},u.d$.widgets.text),{},{factory:function(e,t){return(0,t.RCE)(t.W.BootstrapTextWidget,e)}}),textarea:$n($n({},u.d$.widgets.textarea),{},{factory:function(e,t){return(0,t.RCE)(t.W.BootstrapTextAreaWidget,e)}}),number:$n($n({},u.d$.widgets.number),{},{factory:function(e,t){return(0,t.RCE)(t.W.BootstrapNumberWidget,e)}}),multiselect:$n($n({},u.d$.widgets.multiselect),{},{factory:function(e,t){return(0,t.RCE)(t.W.BootstrapMultiSelectWidget,e)}}),select:$n($n({},u.d$.widgets.select),{},{factory:function(e,t){return(0,t.RCE)(t.W.BootstrapSelectWidget,e)}}),slider:$n($n({},u.d$.widgets.slider),{},{factory:function(e,t){return(0,t.RCE)(t.W.BootstrapSliderWidget,e)}}),boolean:$n($n({},u.d$.widgets.boolean),{},{factory:function(e,t){return(0,t.RCE)(t.W.BootstrapBooleanWidget,e)}}),date:$n($n({},u.d$.widgets.date),{},{factory:function(e,t){return(0,t.RCE)(t.W.BootstrapDateWidget,e)}}),time:$n($n({},u.d$.widgets.time),{},{factory:function(e,t){return(0,t.RCE)(t.W.BootstrapTimeWidget,e)}}),datetime:$n($n({},u.d$.widgets.datetime),{},{factory:function(e,t){return(0,t.RCE)(t.W.BootstrapDateTimeWidget,e)}})}),Kn=$n({},u.d$.types),Jn=$n($n({},u.d$.ctx),{},{W:$n($n({},u.d$.ctx.W),zn)});const Qn=$n($n({},u.d$),{},{ctx:Jn,types:Kn,widgets:Yn,settings:Hn});var Xn=r(20795),Zn=r(51671);var el=r(67656),tl=u.Aq.moment,rl=r(72430),nl=u.Aq.moment,ll=u.Aq.moment,ol=r(64988),al=r(60455),il=r(1453),ul=["options","customProps","searchProps"],cl=["searchProps"];function sl(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function dl(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?sl(Object(r),!0).forEach((function(t){(0,o.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sl(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const pl=function(e){var t=e.options,r=e.customProps,n=e.searchProps,o=(0,oe.A)(e,ul),u=null!=r?r:{},c=u.searchProps,s=(0,oe.A)(u,cl),d=(0,i.useState)(""),p=(0,a.A)(d,2),f=p[0],m=p[1],v=(0,i.useCallback)((function(e,t){return m(t)}),[m]),g=(0,i.useCallback)((function(e){return e.itemType===al.W.Header&&"FilterHeader"===e.key?i.createElement(il.G,(0,l.A)({onChange:v,underlined:!0,placeholder:null==n?void 0:n.placeholder},null!=c?c:{})):i.createElement(i.Fragment,null,e.text)}),[il.G,v,c,n]),y=(0,i.useCallback)((function(){return m("")}),[m]),h=(0,i.useMemo)((function(){return[{key:"FilterHeader",text:"-",itemType:al.W.Header},{key:"divider_filterHeader",text:"-",itemType:al.W.Divider}].concat((0,ce.A)(t.map((function(e){return!e.disabled&&e.text.toLowerCase().indexOf(f.toLowerCase())>-1?e:dl(dl({},e),{},{hidden:!0})}))))}),[t,f]);return i.createElement(ol.m,(0,l.A)({options:h,calloutProps:{shouldRestoreFocus:!1,setInitialFocus:!1},onRenderOption:g,onDismiss:y},o,s))};function fl(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ml(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?fl(Object(r),!0).forEach((function(t){(0,o.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fl(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var vl=u.Aq.ListUtils.mapListValues;var gl=r(74398),yl=["width"],hl=r(11977);function bl(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function El(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?bl(Object(r),!0).forEach((function(t){(0,o.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bl(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Al=u.Aq.ListUtils.mapListValues;function Ol(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var wl=r(14819),Sl=u.Aq.DragIcon,Cl={addSubRuleSimple:"CirclePlus",addSubRule:"Add",addSubGroup:"CirclePlus",addRule:"Add",addGroup:"CirclePlus",delGroup:"Delete",delRuleGroup:"Delete",delRule:"Delete",drag:"GripperBarHorizontal"};var xl=r(82296),kl=r(75521),jl=r(45138),Pl=r(48713),Rl={addSubRuleSimple:!0,delRuleGroup:!0,delRule:!0},Tl={addSubRuleSimple:!0};(0,Xn.v)();const Fl={FluentUITextWidget:function(e){var t=e.value,r=e.setValue,n=e.readonly,l=e.placeholder,o=e.maxLength,a=t||"";return i.createElement(Zn.A,{value:a,placeholder:l,disabled:n,onChange:function(e,t){""===t&&(t=void 0),r(t)},maxLength:o})},FluentUITextAreaWidget:function(e){var t=e.value,r=e.setValue,n=(e.config,e.readonly),o=e.placeholder,a=e.maxLength,u=e.maxRows,c=(e.fullWidth,e.customProps),s=t||"";return i.createElement(Zn.A,(0,l.A)({readonly:n,multiline:!0,rows:u,maxLength:a,placeholder:o,value:s,onChange:function(e){var t=e.target.value;""===t&&(t=void 0),r(t)}},c))},FluentUIDateWidget:function(e){var t=e.value,r=e.setValue,n=(e.config,e.valueFormat),o=e.dateFormat,a=e.readonly,u=e.customProps,c=e.placeholder,s=t?tl(t,n):void 0,d=s?s.toDate():void 0;return i.createElement(el.l,(0,l.A)({disabled:a,value:d,onSelectDate:function(e){(""==e||e instanceof Date&&isNaN(e))&&(e=void 0);var t=e?tl(e).format(n):void 0;r(t)},style:{marginRight:"0.25rem",width:"150px"},placeholder:c,formatDate:function(e){return tl(e).format(o)}},u))},FluentUIDateTimeWidget:function(e){var t=e.value,r=e.setValue,n=(e.config,e.valueFormat),l=e.dateFormat,o=(e.timeFormat,e.use12Hours),u=e.readonly,c=(e.customProps,t?nl(t,n):void 0),s=c?c.toDate():void 0,d=(0,i.useState)(s),p=(0,a.A)(d,2),f=p[0],m=p[1],v=-1!=n.indexOf(":ss");return i.createElement("div",{style:{display:"flex",flexDirection:"row"}},i.createElement(el.l,{disabled:u,value:s,formatDate:function(e){return nl(e).format(l)},onSelectDate:function(e){var t;if((""==e||e instanceof Date&&isNaN(e))&&(e=void 0),e){var l=nl(e);if(f){var o=nl(f);l.set("hour",o.get("hour")),l.set("minute",o.get("minute")),l.set("second",o.get("second"))}t=l.format(n)}t&&r(t)},style:{width:"150px"}}),i.createElement(rl.A,{useHour12:o,value:f,showSeconds:v,disabled:u,onChange:function(e,t){var l;(""==t||t instanceof Date&&isNaN(t))&&(t=void 0),m(t);var o=t?nl(t):void 0;if(c){var a=nl(c);o&&(a.set("hour",o.get("hour")),a.set("minute",o.get("minute")),a.set("second",o.get("second"))),l=a.format(n)}l&&r(l)},useComboBoxAsMenuWidth:!0,style:{marginRight:"5px"}}))},FluentUITimeWidget:function(e){var t=e.value,r=e.setValue,n=(e.config,e.valueFormat),o=e.use12Hours,a=e.readonly,u=e.customProps,c=t?ll(t,n):void 0,s=c?c.toDate():void 0,d=-1!=n.indexOf(":ss");return i.createElement(rl.A,(0,l.A)({styles:{optionsContainerWrapper:{height:"500px"}},useHour12:o,onChange:function(e,t){(""==t||t instanceof Date&&isNaN(t))&&(t=void 0);var l=t?ll(t).format(n):void 0;r(l)},disabled:a,allowFreeform:!0,showSeconds:d,value:s,useComboBoxAsMenuWidth:!0},u))},FluentUISelectWidget:function(e){var t=e.listValues,r=e.value,n=e.setValue,o=(e.allowCustomValues,e.readonly),a=e.customProps,u=e.placeholder,c=e.searchPlaceholder,s=e.showSearch,d=(0,i.useCallback)((function(e,t){void 0!==t.key&&n(t.key.toString())}),[n]),p=s?pl:ol.m,f=(0,i.useMemo)((function(){return{placeholder:c}}),[c]),m=ml(ml({},null!=a?a:{}),s?{searchProps:f}:{});return i.createElement(p,(0,l.A)({placeholder:u||"Select option",options:function(e){var t=[];return vl(e,(function(e){var r=e.title,n=e.value;t.push({key:n,text:r})})),t}(t),selectedKey:r,onChange:d,dropdownWidth:"auto",disabled:o},m))},FluentUINumberWidget:function(e){var t=e.value,r=e.setValue,n=e.readonly,l=e.min,o=e.max,a=e.step,u=e.placeholder;return i.createElement(Zn.A,{type:"number",value:t,placeholder:u,disabled:n,min:l,max:o,step:a,onChange:function(e,t){var n;n=""===t||null==t?void 0:Number.isInteger(a)?parseInt(t):parseFloat(t),r(n)}})},FluentUISliderWidget:function(e){var t=e.config,r=e.placeholder,n=e.customProps,o=e.value,a=e.setValue,u=e.min,c=e.max,s=e.step,d=e.marks,p=e.readonly,f=t.settings.defaultSliderWidth,m=n||{},v=m.width,g=(0,oe.A)(m,yl),y=g.input||{},h=g.slider||g,b=i.createElement(Zn.A,(0,l.A)({type:"number",style:{width:"auto"},value:o,min:u,max:c,step:s,placeholder:r,disabled:p,onChange:function(e,t){t=""===t||null===t?void 0:Number(t),a(t)}},y)),E=i.createElement(gl.A,(0,l.A)({min:u,max:c,step:s,value:o,disabled:p,marks:d,showValue:!1,onChange:function(e){e=""===e||null===e?void 0:Number(e),a(e)}},h)),A={width:v||f};return i.createElement("div",{style:{display:"flex",flexDirection:"row"}},b,i.createElement("div",{style:A},E))},FluentUIBooleanWidget:function(e){var t=e.value,r=e.setValue,n=e.labelYes,l=e.labelNo,o=e.readonly,a="string"==typeof n?n:"Yes",u="string"==typeof l?l:"No";return i.createElement(hl.l,{disabled:o,onText:a,offText:u,onChange:function(){return r(!t)}})},FluentUIMultiSelectWidget:function(e){var t=e.listValues,r=e.value,n=e.setValue,o=e.readonly,a=e.placeholder,u=e.searchPlaceholder,c=e.showSearch,s=e.customProps,d=(0,i.useCallback)((function(e,t){if(t){var l=null!=r?r:[],o=t.selected?[].concat((0,ce.A)(l),[t.key]):l.filter((function(e){return e!==t.key}));n(o)}}),[r,n]),p=c?pl:ol.m,f=(0,i.useMemo)((function(){return{placeholder:u}}),[u]),m=El(El({},null!=s?s:{}),c?{searchProps:f}:{});return i.createElement(p,(0,l.A)({placeholder:a||"Select options",selectedKeys:r,onChange:d,multiSelect:!0,options:Al(t,(function(e){var t=e.title;return{key:e.value,text:t}})),disabled:o},m))},FluentUIFieldSelect:function(e){var t=e.items,r=e.setField,n=e.selectedKey,l=e.placeholder,o=e.errorText;return i.createElement(ol.m,{placeholder:l,options:function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=[],l=0;return Object.keys(t).map((function(o){var a={},u=t[o],c="  ".repeat(r),s=u.items,d=u.path,p=u.label,f=u.disabled;if(s){a.key=d,a.title=p,a.text=c+p,a.itemType=al.W.Header;var m=e(s,r+1);n.push(a);var v,g=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return Ol(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ol(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,l=function(){};return{s:l,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:l}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,i=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){i=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(i)throw o}}}}(m);try{for(g.s();!(v=g.n()).done;){var y=v.value;n.push(y)}}catch(e){g.e(e)}finally{g.f()}n.push({key:"divider_"+l.toString(),text:"-",title:"",itemType:al.W.Divider}),l+=1}else{var h=u.matchesType?i.createElement("b",null,c+p):c+p;a.key=d,a.title=p,a.text=h,a.disabled=f,n.push(a)}})),n}(t),selectedKey:n,onChange:function(e,t){void 0!==t.key&&r(t.key.toString())},onRenderTitle:function(e){var t=e[0];return i.createElement("div",null,i.createElement("span",null,t.title))},dropdownWidth:"auto",styles:{title:{color:o?"red":null}}})},FluentUIIcon:function(e){var t=e.type,r=e.readonly,n=e.renderBtn,l=e.renderDefaultButton;return Cl[t]||"drag"!==t?Cl[t]?n?n({iconProps:{iconName:Cl[t]}}):i.createElement(wl.I,{key:t,disabled:r,iconName:Cl[t],color:"primary"}):l({}):i.createElement(Sl,null)},FluentUIButton:function(e){var t=e.type,r=e.label,n=e.onClick,o=e.readonly,a=e.renderIcon;return null==a?void 0:a({type:t,readonly:o,renderBtn:!r||Rl[t]?function(e){return i.createElement(xl.K,(0,l.A)({key:t,onClick:n,disabled:o,color:"primary"},e))}:Tl[t]?function(e){return i.createElement(kl.r,(0,l.A)({key:t,onClick:n,disabled:o,text:r},e))}:function(e){return i.createElement(jl.z,(0,l.A)({key:t,onClick:n,disabled:o,text:r,color:"primary",styles:{root:{backgroundColor:"transparent"}}},e))},renderDefaultButton:function(e){return i.createElement(Pl.Y,(0,l.A)({key:t,onClick:n,disabled:o,text:r,color:"primary"},e))}})},FluentUIButtonGroup:function(e){var t=e.children;return e.config,i.createElement(i.Fragment,null,t)},FluentUIConjs:function(e){var t=e.id,r=e.not,n=e.setNot,l=e.conjunctionOptions,o=e.setConjunction,a=e.disabled,u=e.readonly,c=e.config,s=e.showNot,d=e.notLabel,p=Object.keys(l).length,f=a,m=c.settings.forceShowConj||p>1&&!f,v={backgroundColor:r?"#fed9cc":"#ffffff"},g=function(e){return o(e)};return i.createElement(i.Fragment,null,s&&(u&&!r?null:i.createElement(Pl.Y,{toggle:n,checked:r,key:t,id:t+"__not",onClick:function(e){return n(e)}.bind(null,!r),disabled:u,text:d||"NOT",style:v})),m&&Object.keys(l).map((function(e){var t=l[e],r=t.id,n=(t.name,t.label),c=t.checked,s=o.isDummyFn?"__dummy":"";return!u&&!a||c?i.createElement(Pl.Y,{toggle:o,checked:c,key:r+s,id:r+s,value:e,onClick:g.bind(null,e),disabled:u||a,text:n}):null})))},FluentUIValueSources:function(e){e.config;var t=e.valueSources,r=e.valueSrc,n=(e.title,e.setValueSrc),l=(e.readonly,function(e,t){null!=t&&t.key&&n(t.key)});return i.createElement(xl.K,{menuProps:function(e){var t=[];return e.map((function(e){var n=(0,a.A)(e,2),l=n[0],o=n[1];return t.push({key:l,text:o.label,checked:r==l||!r&&"value"==l,canCheck:!0})})),{onItemClick:l,items:t}}(t),text:"here",title:"ValueSource",onChange:l,iconProps:{iconName:"ChevronRight"},onRenderMenuIcon:function(){return i.createElement("div",null)}})},FluentUIConfirm:function(e){var t=e.onOk,r=(e.okText,e.cancelText,e.title);confirm(r)&&t()},FluentUIProvider:function(e){return e.config,e.children}};function Wl(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Vl(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Wl(Object(r),!0).forEach((function(t){(0,o.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Wl(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Ll=Vl(Vl({},u.d$.settings),{},{renderField:function(e,t){return(0,t.RCE)(t.W.FluentUIFieldSelect,e)},renderOperator:function(e,t){return(0,t.RCE)(t.W.FluentUIFieldSelect,e)},renderFunc:function(e,t){return(0,t.RCE)(t.W.FluentUIFieldSelect,e)},renderConjs:function(e,t){return(0,t.RCE)(t.W.FluentUIConjs,e)},renderButton:function(e,t){return(0,t.RCE)(t.W.FluentUIButton,e)},renderIcon:function(e,t){return(0,t.RCE)(t.W.FluentUIIcon,e)},renderButtonGroup:function(e,t){return(0,t.RCE)(t.W.FluentUIButtonGroup,e)},renderValueSources:function(e,t){return(0,t.RCE)(t.W.FluentUIValueSources,e)},renderFieldSources:function(e,t){return(0,t.RCE)(t.W.FluentUIValueSources,e)},renderProvider:function(e,t){return(0,t.RCE)(t.W.FluentUIProvider,e)},renderConfirm:function(e,t){return(0,t.W.FluentUIConfirm)(e)}}),Dl=Vl(Vl({},u.d$.widgets),{},{text:Vl(Vl({},u.d$.widgets.text),{},{factory:function(e,t){return(0,t.RCE)(t.W.FluentUITextWidget,e)}}),textarea:Vl(Vl({},u.d$.widgets.textarea),{},{factory:function(e,t){return(0,t.RCE)(t.W.FluentUITextAreaWidget,e)}}),number:Vl(Vl({},u.d$.widgets.number),{},{factory:function(e,t){return(0,t.RCE)(t.W.FluentUINumberWidget,e)}}),multiselect:Vl(Vl({},u.d$.widgets.multiselect),{},{factory:function(e,t){return(0,t.RCE)(t.W.FluentUIMultiSelectWidget,e)}}),select:Vl(Vl({},u.d$.widgets.select),{},{factory:function(e,t){return(0,t.RCE)(t.W.FluentUISelectWidget,e)}}),slider:Vl(Vl({},u.d$.widgets.slider),{},{factory:function(e,t){return(0,t.RCE)(t.W.FluentUISliderWidget,e)}}),boolean:Vl(Vl({},u.d$.widgets.boolean),{},{factory:function(e,t){return(0,t.RCE)(t.W.FluentUIBooleanWidget,e)}}),date:Vl(Vl({},u.d$.widgets.date),{},{factory:function(e,t){return(0,t.RCE)(t.W.FluentUIDateWidget,e)}}),time:Vl(Vl({},u.d$.widgets.time),{},{factory:function(e,t){return(0,t.RCE)(t.W.FluentUITimeWidget,e)}}),datetime:Vl(Vl({},u.d$.widgets.datetime),{},{factory:function(e,t){return(0,t.RCE)(t.W.FluentUIDateTimeWidget,e)}})}),ql=Vl({},u.d$.types),Il=Vl(Vl({},u.d$.ctx),{},{W:Vl(Vl({},u.d$.ctx.W),Fl)});const _l=Vl(Vl({},u.d$),{},{ctx:Il,types:ql,widgets:Dl,settings:Ll});var Bl=i.lazy((function(){return r.e(441).then(r.bind(r,12441))})),Ml=i.lazy((function(){return r.e(665).then(r.bind(r,19665))})),Nl={vanilla:Bl,mui:i.lazy((function(){return Promise.all([r.e(712),r.e(756)]).then(r.bind(r,11601))})),antd:Ml,material:i.lazy((function(){return r.e(921).then(r.bind(r,17921))})),bootstrap:i.lazy((function(){return Promise.all([r.e(615),r.e(804)]).then(r.bind(r,19126))})),fluent:i.lazy((function(){return r.e(898).then(r.bind(r,80898))}))},Ul={vanilla:u.d$,antd:rr,material:xn,mui:nr.WQ,bootstrap:Qn,fluent:_l};const zl=function(e){var t=e.skin,r=Nl[t];return i.createElement(i.Suspense,{fallback:i.createElement(i.Fragment,null,"loading styles for ",t)},i.createElement(r,null))};var Gl=r(12495),$l=r.n(Gl),Hl=r(34695),Yl=r(8305),Kl=r(89601);function Jl(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ql(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Jl(Object(r),!0).forEach((function(t){(0,o.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Jl(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Xl=u.Aq.Autocomplete.simulateAsyncFetch;const Zl=function(e){var t=Ul[e],r=Xl([{title:"A",value:"a"},{title:"AA",value:"aa"},{title:"AAA1",value:"aaa1"},{title:"AAA2",value:"aaa2"},{title:"B",value:"b"},{title:"C",value:"c"},{title:"D",value:"d"},{title:"E",value:"e"},{title:"F",value:"f"},{title:"G",value:"g"},{title:"H",value:"h"},{title:"I",value:"i"},{title:"J",value:"j"}],3),n=Ql({},t.conjunctions),l=Ql(Ql({},t.operators.proximity),{},{valueLabels:[{label:"Word 1",placeholder:"Enter first word"},{label:"Word 2",placeholder:"Enter second word"}],textSeparators:[],options:Ql(Ql({},t.operators.proximity.options),{},{optionLabel:"Near",optionTextBefore:"Near",optionPlaceholder:"Select words between",minProximity:2,maxProximity:10,defaults:{proximity:2},customProps:{}})}),o=Ql(Ql({},t.operators),{},{proximity:l,between:Ql(Ql({},t.operators.between),{},{valueLabels:["Value from","Value to"],textSeparators:["from","to"]})}),a=Ql(Ql({},t.widgets),{},{text:Ql({},t.widgets.text),textarea:Ql(Ql({},t.widgets.textarea),{},{maxRows:3}),slider:Ql({},t.widgets.slider),rangeslider:Ql({},t.widgets.rangeslider),date:Ql(Ql({},t.widgets.date),{},{dateFormat:"DD.MM.YYYY",valueFormat:"YYYY-MM-DD"}),time:Ql(Ql({},t.widgets.time),{},{timeFormat:"HH:mm",valueFormat:"HH:mm:ss"}),datetime:Ql(Ql({},t.widgets.datetime),{},{timeFormat:"HH:mm",dateFormat:"DD.MM.YYYY",valueFormat:"YYYY-MM-DD HH:mm:ss"}),func:Ql(Ql({},t.widgets.func),{},{customProps:{showSearch:!0}}),select:Ql({},t.widgets.select),multiselect:Ql(Ql({},t.widgets.multiselect),{},{customProps:{width:"200px",input:{width:"100px"}}}),treeselect:Ql(Ql({},t.widgets.treeselect),{},{customProps:{showSearch:!0}})}),c=Ql(Ql({},t.types),{},{text:Ql(Ql({},t.types.text),{},{excludeOperators:["proximity"]}),boolean:$l()({},t.types.boolean,{widgets:{boolean:{widgetProps:{hideOperator:!0,operatorInlineLabel:"is"},opProps:{equal:{label:"is"},not_equal:{label:"is not"}}}}})}),s={locale:{moment:"ru",antd:Hl.A,material:Yl.Fc,mui:Kl.Fc},valueLabel:"Value",valuePlaceholder:"Value",fieldLabel:"Field",operatorLabel:"Operator",funcLabel:"Function",fieldPlaceholder:"Select field",funcPlaceholder:"Select function",operatorPlaceholder:"Select operator",lockLabel:"Lock",lockedLabel:"Locked",deleteLabel:void 0,addGroupLabel:"Add group",addRuleLabel:"Add rule",addSubRuleLabel:"Add sub rule",addSubGroupLabel:"Add sub group",delGroupLabel:void 0,notLabel:"Not",fieldSourcesPopupTitle:"Select source",valueSourcesPopupTitle:"Select value source",removeRuleConfirmOptions:{title:"Are you sure delete this rule?",okText:"Yes",okType:"danger",cancelText:"Cancel"},removeGroupConfirmOptions:{title:"Are you sure delete this group?",okText:"Yes",okType:"danger",cancelText:"Cancel"},loadMoreLabel:"Load more...",loadingMoreLabel:"Loading more...",typeToSearchLabel:"Type to search",loadingLabel:"Loading...",notFoundLabel:"Not found"},d=Ql(Ql(Ql({},t.settings),s),{},{defaultSliderWidth:"200px",defaultSelectWidth:"200px",defaultSearchWidth:"100px",defaultMaxRows:5,valueSourcesInfo:{value:{label:"Value"},field:{label:"Field",widget:"field"},func:{label:"Function",widget:"func"}},fieldSources:["field","func"],keepInputOnChangeFieldSrc:!0,reverseOperatorsForNot:!0,canShortMongoQuery:!0,fixJsonLogicDateCompareOp:!0,exportPreserveGroups:!1,maxNesting:5,canLeaveEmptyGroup:!0,shouldCreateEmptyGroup:!1,showErrorMessage:!0,removeEmptyGroupsOnLoad:!1,removeEmptyRulesOnLoad:!1,removeIncompleteRulesOnLoad:!1,customFieldSelectProps:{showSearch:!0},customOperatorSelectProps:{},caseValueField:{type:"number",fieldSettings:{min:0,max:10},valueSources:["value","field","func"]}}),p={user:{label:"User",tooltip:"Group of fields",type:"!struct",subfields:{firstName:{label2:"Username",type:"text",fieldSettings:{validateValue:function(e,t){return e.length<10}},mainWidgetProps:{valueLabel:"Name",valuePlaceholder:"Enter name"}},login:{type:"text",tableName:"t1",fieldSettings:{validateValue:function(e,t){return e.length<10&&(""===e||null!==e.match(/^[A-Za-z0-9_-]+$/))}},mainWidgetProps:{valueLabel:"Login",valuePlaceholder:"Enter login"}}}},bio:{label:"Bio",type:"text",preferWidgets:["textarea"],fieldSettings:{maxLength:1e3}},results:{label:"Results",type:"!group",subfields:{product:{type:"select",fieldSettings:{listValues:["abc","def","xyz"]},valueSources:["value"]},score:{type:"number",fieldSettings:{min:0,max:100},valueSources:["value"]}}},cars:{label:"Cars",type:"!group",mode:"array",conjunctions:["AND","OR"],showNot:!0,operators:["equal","not_equal","less","less_or_equal","greater","greater_or_equal","between","not_between","some","all","none"],defaultOperator:"some",initialEmptyWhere:!0,fieldSettings:{validateValue:function(e){return e<10?null:{error:"Too many cars, see validateValue()",fixedValue:9}}},subfields:{vendor:{type:"select",fieldSettings:{listValues:["Ford","Toyota","Tesla"]},valueSources:["value"]},year:{type:"number",fieldSettings:{min:1990,max:2021},valueSources:["value"]},model:{type:"text",valueSources:["value"]}}},prox1:{label:"prox",tooltip:"Proximity search",type:"text",operators:["proximity"]},num:{label:"Number",type:"number",preferWidgets:["number"],fieldSettings:{min:-1,max:5},funcs:["number.LINEAR_REGRESSION"]},slider:{label:"Slider",type:"number",preferWidgets:["slider","rangeslider"],valueSources:["value","field"],fieldSettings:{min:0,max:100,step:1,marks:{0:i.createElement("strong",null,"0%"),100:i.createElement("strong",null,"100%")},validateValue:function(e,t){return e<50?null:{error:{key:"custom:INVALID_SLIDER_VALUE",args:{val:e}},fixedValue:49}}},widgets:{slider:{widgetProps:{valuePlaceholder:"..Slider"}},rangeslider:{widgetProps:{valueLabels:[{label:"Number from",placeholder:"from"},{label:"Number to",placeholder:"to"}]}}}},date:{label:"Date",type:"date",valueSources:["value","func"],fieldSettings:{dateFormat:"DD-MM-YYYY",validateValue:function(e,t){return vr()(e,t.valueFormat).year()!=(new Date).getFullYear()?"Please use current year":null}}},time:{label:"Time",type:"time",valueSources:["value"],defaultOperator:"between"},datetime:{label:"DateTime",type:"datetime",valueSources:["value","func"]},datetime2:{label:"DateTime2",type:"datetime",valueSources:["field"]},color:{label:"Color",type:"select",valueSources:["value"],widgets:{select:{widgetProps:{valuePlaceholder:"Select color",searchPlaceholder:"Search color"}},multiselect:{widgetProps:{valuePlaceholder:"Select colors",searchPlaceholder:"Search colors"}}},fieldSettings:{showSearch:!0,listValues:[{value:"yellow",title:"Yellow"},{value:"green",title:"Green"},{value:"orange",title:"Orange"}]}},color2:{label:"Color2",type:"select",fieldSettings:{listValues:{yellow:"Yellow",green:"Green",orange:"Orange",purple:"Purple"}}},multicolor:{label:"Colors",type:"multiselect",fieldSettings:{showSearch:!0,listValues:{yellow:"Yellow",green:"Green",orange:"Orange"},allowCustomValues:!0},mainWidgetProps:{customProps:{tokenSeparators:[","]}}},selecttree:{label:"Color (tree)",type:"treeselect",fieldSettings:{treeExpandAll:!0,treeValues:[{value:"1",title:"Warm colors"},{value:"2",title:"Red",parent:"1"},{value:"3",title:"Orange",parent:"1"},{value:"4",title:"Cool colors"},{value:"5",title:"Green",parent:"4"},{value:"6",title:"Blue",parent:"4"},{value:"7",title:"Sub blue",parent:"6"},{value:"8",title:"Sub sub blue and a long text",parent:"7"}]}},multiselecttree:{label:"Colors (tree)",type:"treemultiselect",fieldSettings:{treeExpandAll:!0,treeValues:[{value:"1",title:"Warm colors",children:[{value:"2",title:"Red"},{value:"3",title:"Orange"}]},{value:"4",title:"Cool colors",children:[{value:"5",title:"Green"},{value:"6",title:"Blue",children:[{value:"7",title:"Sub blue",children:[{value:"8",title:"Sub sub blue and a long text"}]}]}]}]}},autocomplete:{label:"Autocomplete",type:"select",valueSources:["value"],fieldSettings:{asyncFetch:r,useAsyncSearch:!0,fetchSelectedValuesOnInit:!0,useLoadMore:!0,forceAsyncSearch:!1,allowCustomValues:!1}},autocompleteMultiple:{label:"AutocompleteMultiple",type:"multiselect",valueSources:["value"],fieldSettings:{asyncFetch:r,useAsyncSearch:!0,fetchSelectedValuesOnInit:!0,useLoadMore:!0,forceAsyncSearch:!1,allowCustomValues:!1}},stock:{label:"In stock",type:"boolean",defaultValue:!0,mainWidgetProps:{labelYes:"+",labelNo:"-"}}},f={string:{type:"!struct",label:"String",tooltip:"String functions",subfields:{LOWER:$l()({},u.uu.LOWER,{tooltip:"Convert to lower case",allowSelfNesting:!0,validateValue:function(e){return e.length<=7?null:{error:"bad len",fixedValue:e.substring(0,7)}},args:{str:{validateValue:function(e){return e.length<=7?null:{error:{key:"custom:BAD_LEN",args:{val:e}},fixedValue:e.substring(0,7)}}}}}),UPPER:$l()({},u.uu.UPPER,{tooltip:"Convert to upper case",allowSelfNesting:!0,validateValue:function(e){return e.length<=6?null:{error:"bad len",fixedValue:e.substring(0,6)}},args:{str:{validateValue:function(e){return e.length<=6?null:{error:{key:"custom:BAD_LEN",args:{val:e}},fixedValue:e.substring(0,6)}}}}})}},datetime:{type:"!struct",label:"Datetime",subfields:{NOW:u.uu.NOW,START_OF_TODAY:u.uu.START_OF_TODAY,TRUNCATE_DATETIME:$l()({},u.uu.TRUNCATE_DATETIME,{args:{date:{defaultValue:{func:"datetime.NOW",args:[]}}}}),RELATIVE_DATETIME:$l()({},u.uu.RELATIVE_DATETIME,{args:{date:{defaultValue:{func:"datetime.NOW",args:[]}}}})}},date:{type:"!struct",label:"Date",subfields:{TODAY:u.uu.TODAY,RELATIVE_DATE:$l()({},u.uu.RELATIVE_DATE,{args:{date:{defaultValue:{func:"date.TODAY",args:[]}}}})}},number:{type:"!struct",label:"Math",subfields:{LINEAR_REGRESSION:u.uu.LINEAR_REGRESSION}}};return{ctx:t.ctx,conjunctions:n,operators:o,widgets:a,types:c,settings:d,fields:p,funcs:f}};var eo=function(e,t,r){var n=function(){!function(e,t){var r,n,l,o=[e.get("id")],a=(null===(r=e.get("children1"))||void 0===r?void 0:r.size)||0,i=null===(n=e.get("children1"))||void 0===n?void 0:n.first(),c=null===(l=e.get("children1"))||void 0===l?void 0:l.last(),s=[e.get("id"),null==i?void 0:i.get("id")],d=[e.get("id"),null==c?void 0:c.get("id")];t.setNot(o,!0),t.setConjunction(o,"OR"),a>1&&t.moveItem(s,d,"before"),a&&"rule"===i.get("type")&&(t.setFieldSrc(s,"field"),t.setField(s,"num"),t.setOperator(s,"between"),t.setValueSrc(s,0,"value"),t.setValue(s,0,2,"number"),t.setValue(s,1,4,"number")),a>1&&t.removeRule(d);var p=[e.get("id"),u.Aq.uuid()];t.addRule(o,{id:p[1],field:null,operator:null,value:[]}),t.setFieldSrc(p,"func"),t.setFuncValue(p,-1,[],null,"string.LOWER","string"),t.setFuncValue(p,-1,[],"str","aaa","string"),t.setValueSrc(p,0,"func"),t.setFuncValue(p,0,[],null,"string.LOWER","string"),t.setFuncValue(p,0,[],"str","AAA","string"),t.addRule(o,{field:"user.login",operator:"equal",value:["denis"],valueSrc:["value"],valueType:["text"]}),t.addRule(o,{field:"user.login",operator:"equal",value:["user.firstName"],valueSrc:["field"]}),t.addRule(o,{field:"cars",mode:"array",operator:"all"},"rule_group",[{type:"rule",properties:{field:"cars.year",operator:"equal",value:[2021]}}]),t.addGroup(o,{conjunction:"AND"},[{type:"rule",properties:{field:"slider",operator:"equal",value:[40]}},{type:"group",properties:{conjunction:"AND"},children1:[{type:"rule",properties:{field:"slider",operator:"less",value:[20]}}]}])}(e.tree,r.current.actions)};return{runActions:n,renderRunActions:function(){return i.createElement(i.Fragment,null,e.renderBocks.queryBuilder&&i.createElement("button",{onClick:n},"Run actions"))}}},to=u.Aq.uuid,ro={id:to(),type:"group"},no={id:to(),type:"switch_group"},lo={"logic/complex":{and:[{"==":[{var:"user.login"},{toLowerCase:[{var:"user.firstName"}]}]},{"==":[{var:"stock"},!1]},{"==":[{var:"slider"},35]},{some:[{var:"results"},{and:[{"==":[{var:"product"},"abc"]},{">":[{var:"score"},8]}]}]},{">":[{reduce:[{filter:[{var:"cars"},{and:[{"==":[{var:"vendor"},"Toyota"]},{">=":[{var:"year"},2010]}]}]},{"+":[1,{var:"accumulator"}]},0]},2]}]},"logic/simple":{and:[{"==":[{var:"slider"},35]}]},"logic/with_not":{and:[{"!":{and:[{in:["abc3",{var:"user.firstName"}]}]}},{"!":{in:["xyz",{var:"user.firstName"}]}},{"!":{and:[{"<=":[1,{var:"num"},2]}]}},{"!":{"<=":[3,{var:"num"},4]}},{"!":{and:[{in:[{var:"color"},["yellow"]]}]}},{"!":{in:[{var:"color"},["green"]]}},{"!":{and:[{all:[{var:"multicolor"},{in:[{var:""},["yellow"]]}]}]}},{"!":{all:[{var:"multicolor"},{in:[{var:""},["yellow"]]}]}},{"!":{and:[{some:[{var:"multicolor"},{in:[{var:""},["green"]]}]}]}},{"!":{some:[{var:"multicolor"},{in:[{var:""},["green"]]}]}},{"==":[{var:"user.firstName"},null]}]},"logic/with_not_in_some":{and:[{some:[{var:"cars"},{in:[{var:"vendor"},["Ford","Toyota"]]}]},{all:[{var:"cars"},{"!":{in:[{var:"vendor"},["Ford","Toyota"]]}}]},{all:[{var:"cars"},{"!":{and:[{"!":{in:[{var:"vendor"},["Ford","Toyota"]]}}]}}]},{some:[{var:"cars"},{"!":{and:[{"!":{in:[{var:"vendor"},["Ford","Toyota"]]}}]}}]},{some:[{var:"cars"},{"!":{"!":{in:[{var:"vendor"},["Ford","Toyota"]]}}}]},{some:[{var:"cars"},{"!":{"!":{"!":{in:[{var:"vendor"},["Ford","Toyota"]]}}}}]}]},"logic/with_func_in_lhs":{and:[{"!":{in:["Den",{toLowerCase:[{var:"user.firstName"}]}]}},{"!=":[{toLowerCase:[{toUpperCase:[{var:"user.login"}]}]},{toLowerCase:["user"]}]}]},"logic/autocomplete":{and:[{"==":[{var:"autocomplete"},"jjj"]},{"==":[{var:"autocomplete"},"c"]},{all:[{var:"autocompleteMultiple"},{in:[{var:""},["ggg","jjjj","aa","b"]]}]}]},"logic/with_group_some_in_any":{and:[{some:[{var:"cars"},{in:[{var:"vendor"},["Ford"]]}]}]},"logic/with_group_some_in_like":{and:[{some:[{var:"cars"},{in:["toyo",{var:"model"}]}]}]},"logic/switch_with_2_cases":{if:[{"!=":[{var:"slider"},null]},{var:"slider"},{var:"num"}]},"logic/switch_with_default_case_field":{var:"num"},"logic/switch_with_default_case_func":{"+":[{"*":[1,{var:"num"}]},0]},"tree/complex":{type:"group",id:"9a99988a-0123-4456-b89a-b1607f326fd8",children1:[{id:"a98ab9b9-cdef-4012-b456-71607f326fd9",type:"rule",properties:{field:"user.login",operator:"equal",value:[{func:"string.LOWER",args:{str:{valueSrc:"field",value:"user.firstName"}}}],valueSrc:["func"],valueType:["text"],valueError:[null]}},{id:"98a8a9ba-0123-4456-b89a-b16e721c8cd0",type:"rule",properties:{field:"stock",operator:"equal",value:[!1],valueSrc:["value"],valueType:["boolean"],valueError:[null]}},{id:"aabbab8a-cdef-4012-b456-716e85c65e9c",type:"rule",properties:{field:"slider",operator:"equal",value:[35],valueSrc:["value"],valueType:["number"],valueError:[null]}},{id:"aaab8999-cdef-4012-b456-71702cd50090",type:"rule_group",properties:{conjunction:"AND",field:"results"},children1:[{id:"99b8a8a8-89ab-4cde-b012-31702cd5078b",type:"rule",properties:{field:"results.product",operator:"select_equals",value:["abc"],valueSrc:["value"],valueType:["select"],valueError:[null]}},{id:"88b9bb89-4567-489a-bcde-f1702cd53266",type:"rule",properties:{field:"results.score",operator:"greater",value:[8],valueSrc:["value"],valueType:["number"],valueError:[null]}}]},{id:"a99a9b9b-cdef-4012-b456-7175a7d54553",type:"rule_group",properties:{mode:"array",operator:"greater",valueType:["number"],value:[2],valueSrc:["value"],conjunction:"AND",valueError:[null],field:"cars"},children1:[{id:"99a9a9a8-89ab-4cde-b012-3175a7d55374",type:"rule",properties:{field:"cars.vendor",operator:"select_equals",value:["Toyota"],valueSrc:["value"],valueError:[null],valueType:["select"]}},{id:"988bbbab-4567-489a-bcde-f175a7d58793",type:"rule",properties:{field:"cars.year",operator:"greater_or_equal",value:[2010],valueSrc:["value"],valueError:[null],valueType:["number"]}}]}],properties:{conjunction:"AND",not:!1}},"tree/empty":ro,"tree/empty_switch":no,"sql/simple":"LOWER(user.firstName) = UPPER('gg') AND (DATE_ADD(NOW(), INTERVAL 2 DAY) > TO_DATE('2024-07-26 00:00:00.000', 'yyyy-mi-dd hh:mm:ss.mmm') OR DATE_SUB(NOW(), INTERVAL 4 MONTH ) > '2024-05-10 00:00:00.000') AND num <> 2 AND bio = 'Long\\nText'"},oo=r(7262),ao=r(9919),io=oo.Aq.OtherUtils.logger,uo=[],co=["some","all","none"],so={single_quote_string:"text",double_quote_string:"text",backticks_quote_string:"text",var_string:"text",natural_string:"text",hex_string:"text",full_hex_string:"text",bit_string:"text",string:"text",regex_string:"text",number:"number",null:"null",bool:"boolean",boolean:"boolean"},po=function(e,t,r){if(null!=e&&e.children&&["TO_DATE","TO_TIMESTAMP","TO_TIMESTAMP_TZ","TO_UTC_TIMESTAMP_TZ"].includes(e.func)&&e.children.length>=1){var n,l=e.children,o=(0,a.A)(l,2),i=o[0];if(o[1],null!=i&&null!==(n=i.valueType)&&void 0!==n&&n.endsWith("_quote_string")){var u=t,c=this.utils.moment(i.value);return c.isValid()?{value:c.format(null==u?void 0:u.valueFormat)}:{value:null,error:"Invalid date"}}}};function fo(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function mo(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?fo(Object(r),!0).forEach((function(t){(0,o.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fo(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var vo=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e){var n;if("function"===e.type)n=So(e,t,r);else if("binary_expr"===e.type)n=["AND","OR"].includes(e.operator)?go(e,t,r):ho(e,t,r);else if("unary_expr"===e.type)if("NOT"===e.operator){var l=e.expr;(n=vo(l,t,!r))&&(n.parentheses=!0)}else t.errors.push("Unexpected unary operator ".concat(e.operator));else"expr_list"===e.type?n=Eo(e,t,r):"case"===e.type?n=yo(e,t,r):"column_ref"===e.type?n=wo(e,t,r):"interval"===e.type?n=Ao(e,t,r):void 0!==e.value?n=Oo(e,t,r):t.errors.push("Unexpected logic type ".concat(e.type));return n}},go=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=e.parentheses,l=e.operator,o=[vo(e.left,t),vo(e.right,t)].filter((function(e){return!!e})).reduce((function(e,t){var r,n=(null==t?void 0:t.conj)!==l||t.parentheses||t.not?[t]:null!==(r=t.children)&&void 0!==r?r:[];return[].concat((0,ce.A)(e),(0,ce.A)(n))}),[]);return{parentheses:n,not:r,conj:l,children:o}},yo=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{parentheses:e.parentheses,children:e.args.map((function(e){return["when","else"].includes(e.type)||t.errors.push("Unexpected type ".concat(e.type," inside CASE")),{cond:"when"===e.type?vo(e.cond,t):void 0,result:vo(e.result,t)}})).filter((function(e){return!!e})),_type:"case",not:r}},ho=function(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],l=e.parentheses,o=e.operator,a=[vo(e.left,t),vo(e.right,t)].filter((function(e){return!!e}));return"BETWEEN"!==o&&"NOT BETWEEN"!==o||(a=[a[0]].concat((0,ce.A)(null!==(r=a[1].children)&&void 0!==r?r:[])).filter((function(e){return!!e}))),{parentheses:l,not:n,children:a,operator:o}},bo=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=e.value;return"boolean"===e.type&&r&&(n=!n),n},Eo=function(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],l=e.value.map((function(e){return vo(e,t,!1)})).filter((function(e){return!!e})),o=l.map((function(e){return e.valueType})).filter((function(e){return!!e})),a=Array.from(new Set(o)),i=o.length===l.length&&1===a.length?a[0]:void 0;return i&&so[i]&&(r=l.map((function(e){return e.value}))),{children:l,not:n,_type:"expr_list",oneValueType:i,values:r}},Ao=function(e,t){var r;return mo(mo({_type:"interval"},null!==(r=Oo(e.expr,t))&&void 0!==r?r:{}),{},{unit:e.unit})},Oo=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{valueType:e.type,value:bo(e,t,r)}},wo=function(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if("expr"!==e.type){var l=e.parentheses,o="string"==typeof e.column?e.column:function(e,t){var r=bo(e,t,arguments.length>2&&void 0!==arguments[2]&&arguments[2]);return String(r)}(e.column.expr,t,n),a=null!==(r=e.table)&&void 0!==r?r:void 0;return""===o?{valueType:"single_quote_string",value:""}:{parentheses:l,field:o,table:a}}},So=function(e,t){var r,n,l,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=e.name.name[0].type,u=e.name.name[0].value,c=function(r){if(e.args){if("expr_list"===e.args.type)return e.args.value.map((function(e){return vo(e,t,r?o:void 0)})).filter((function(e){return!!e}));t.errors.push("Unexpected args type for func (".concat(JSON.stringify(e.name.name),"): ").concat(JSON.stringify(e.args.type)))}return[]};if("default"===i&&"NOT"===u)1===(null===(n=e.args)||void 0===n?void 0:n.value.length)?((r=c(!1)[0]).not=!r.not,o&&(r.not=!r.not)):t.errors.push("Unexpected args for func NOT: ".concat(JSON.stringify(null===(l=e.args)||void 0===l?void 0:l.value)));else if("default"===i&&"IFNULL"===u)r=c(!0)[0];else{if("default"===i){var s="IF"===u,d=c(!1);return r={func:u,children:d,not:o},s&&(r.ternaryChildren=function(e,t){var r=[];return function e(n){var l=(0,a.A)(n,3),o=l[0],i=l[1],u=l[2];"IF"===i.func&&t.errors.push("Unexpected IF inside IF"),r.push([o,i]),"IF"===(null==u?void 0:u.func)?e(null==u?void 0:u.children):r.push([void 0,u])}(e),r}(d,t)),r}t.errors.push("Unexpected function name ".concat(JSON.stringify(e.name.name)))}return r},Co=function(e){return"case"===(null==e?void 0:e._type)?"CASE":"interval"===(null==e?void 0:e._type)?"INTERVAL ".concat(JSON.stringify(e.value)," ").concat(e.unit):null!=e&&e.func?"".concat(e.func,"()"):null!=e&&e.operator?"operator ".concat(e.operator):"expr_list"===(null==e?void 0:e._type)?JSON.stringify(e.values):JSON.stringify(e)},xo=r(34591);function ko(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return jo(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?jo(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,l=function(){};return{s:l,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:l}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,i=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){i=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(i)throw o}}}}function jo(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Po(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ro(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Po(Object(r),!0).forEach((function(t){(0,o.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Po(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var To=function(e,t,r,n,l){var o,a,i=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(e)return e.operator?a=qo(e,t,r,n,l):e.conj?a=Lo(e,t,r,n,l):e.ternaryChildren?a=Fo(e,t,r,n,l):e.func?a=qo(e,t,r,n,l):n.errors.push("Unexpected logic: ".concat(Co(e))),"group"===(null===(o=a)||void 0===o?void 0:o.type)&&(a=Do(a,r)),i&&a&&"group"!=a.type&&"switch_group"!=a.type&&(a=zo(a,r,e.not)),a},Fo=function(e,t,r,n,l){var o=e.ternaryChildren;return{type:"switch_group",children1:(null!=o?o:[]).map((function(l){var o=(0,a.A)(l,2),i=o[0],u=o[1];return Wo(i,u,t,r,n,e)}))}},Wo=function(e,t,r,n,l,o){var a,i=Vo(n,l,r,t,o);return e?(a=To(e,r,n,l,o,!0))&&a.type?a.type="case_group":(l.errors.push("Unexpected case: ".concat(JSON.stringify(a))),a=void 0):a={type:"case_group",properties:{}},a&&(a.properties=Ro(Ro({},a.properties),i)),a},Vo=function(e,t,r,n,l){var o=oo.Aq.ConfigUtils.getFieldConfig(e,"!case_value"),a=null==o?void 0:o.mainWidget,i=e.widgets[a],u=Io(n,r,e,t,l);return u&&"value"===u.valueSrc&&(u.valueType=i.type||o.type||u.valueType),{value:[u.value],valueSrc:[u.valueSrc],valueType:[u.valueType],field:"!case_value"}},Lo=function(e,t,r,n,l){var o=e.conj,a=e.children,i=t.conjunctions[o],u=(a||[]).map((function(l){return To(l,t,r,n,e)})).filter((function(e){return!!e}));return{type:"group",properties:{conjunction:i,not:e.not},children1:u}},Do=function(e,t){var r,n,l=(null!==(r=e.children1)&&void 0!==r?r:[]).filter((function(e){return"rule"===e.type||"rule_group"===e.type})).map((function(e){var t;return null===(t=e.properties)||void 0===t?void 0:t.field})).filter((function(e){return!!e}));if((null==l?void 0:l.length)===(null===(n=e.children1)||void 0===n?void 0:n.length)){var o=function(e,t){if(e.length>0){var r=e.map((function(e){var r;return null===(r=oo.Aq.ConfigUtils.getFieldParts(e,t).filter((function(e){var r;return"!group"===(null===(r=oo.Aq.ConfigUtils.getFieldConfig(t,e))||void 0===r?void 0:r.type)})).reverse())||void 0===r?void 0:r[0]})).filter((function(e){return!!e})),n=1===Array.from(new Set(r)).length;if(r.length===e.length&&n)return r[0]}}(l,t);if(o){var a=e;return a.type="rule_group",a.properties.field=o,a.properties.fieldSrc="field",a}}return e},qo=function(e,t,r,n,l){var o,i,u,c,s=t.operators[e.operator],d=null===(o=s)||void 0===o?void 0:o[0],p=Mo(e,t,r,n,l);if(p)d=p.operator,u=p.children,c=p.operatorOptions;else{if(!e.operator)return void n.errors.push("Can't convert ".concat(Co(e)));var f,m,v,g=Object.fromEntries((e.children||[]).map((function(e,t){return[t,e]})).filter((function(e){var t=(0,a.A)(e,2),r=(t[0],t[1]);return void 0!==r.value||void 0!==r.field})).map((function(l){var o=(0,a.A)(l,2),i=o[0],u=o[1];return[i,Io(u,t,r,n,e)]}))),y=(0,ce.A)(new Set(Object.values(g).map((function(e){var t;return null!==(t=null==e?void 0:e.valueType)&&void 0!==t?t:null==e?void 0:e._maybeValueType})).filter((function(e){return!!e})))),h=1===y.length?y[0]:void 0,b=ko(e.children||[]);try{for(b.s();!(v=b.n()).done;){var E=v.value;E.func&&!E._type&&(E._type=h)}}catch(e){b.e(e)}finally{b.f()}var A,O=(u=(e.children||[]).map((function(l,o){var a;return null!==(a=g[o])&&void 0!==a?a:Io(l,t,r,n,e)}))).filter((function(e){return"multiselect"===(null==e?void 0:e.valueType)})).length>0,w=u.filter((function(e){return"select"===(null==e?void 0:e.valueType)})).length>0;if((null===(f=s)||void 0===f?void 0:f.length)>1&&(O?s=s.filter((function(e){return!["equal","not_equal","select_equals","select_not_equals"].includes(e)})):w&&(s=s.filter((function(e){return!["equal","not_equal"].includes(e)}))),d=null===(A=s)||void 0===A?void 0:A[0]),null===(m=s)||void 0===m||!m.length)return void n.errors.push("Can't convert ".concat(Co(e)));s.length>1&&!["=","!=","<>"].includes(e.operator)&&n.warnings.push('SQL operator "'.concat(e.operator,'" can be converted to several operators: ').concat(s.join(", ")))}var S=(u||[]).filter((function(e){return!!e})),C=(0,xo.A)(S),x=C[0],k=C.slice(1),j={operator:d,value:[],valueSrc:[],valueType:[],valueError:[],field:void 0};c&&(j.operatorOptions=c),"field"===(null==x?void 0:x.valueSrc)?(j.field=x.value,j.fieldSrc="field"):"func"===(null==x?void 0:x.valueSrc)&&(j.field=x.value,j.fieldSrc=x.valueSrc);var P=oo.Aq.ConfigUtils.getOperatorConfig(r,d,null!==(i=j.field)&&void 0!==i?i:void 0),R=null==P?void 0:P.valueTypes;return k.forEach((function(e,t){if(e){j.valueSrc[t]=null==e?void 0:e.valueSrc;var r=null==e?void 0:e.valueType,l=null==e?void 0:e.value;r&&R&&!R.includes(r)&&n.warnings.push('Operator "'.concat(d,'" supports value types [').concat(R.join(", "),"] but got ").concat(r)),1===(null==R?void 0:R.length)&&(r=R[0]),r&&"value"===(null==e?void 0:e.valueSrc)&&(l=Go(l,r)),j.valueType[t]=r,j.value[t]=l,null!=e&&e.valueError&&(j.valueError[t]=e.valueError)}})),{type:"rule",properties:j}},Io=function(e,t,r,n,l){var o=r.settings.fieldSeparator;if(null!=e&&e.valueType){var i,u=null==e?void 0:e.valueType,c=so[u];c||n.warnings.push("Unexpected value type ".concat(u));var s=e.value;return"text"===c&&(s.match(/^\d{4}-\d{2}-\d{2}[T ]\d{2}:\d{2}:\d{2}/)&&(i="datetime"),s.match(/^\d{4}-\d{2}-\d{2}$/)&&(i="date"),c=void 0),{valueSrc:"value",valueType:c,_maybeValueType:i,value:s}}if(null!=e&&e.field){var d,p=[e.table,e.field].filter((function(e){return!!e})).join(o),f=ko(oo.Aq.ConfigUtils.iterateFields(r));try{for(f.s();!(d=f.n()).done;){var m=(0,a.A)(d.value,3),v=m[0],g=m[1],y=m[2];if(g.tableName===e.table&&y===e.field){p=v;break}}}catch(e){f.e(e)}finally{f.f()}var h=oo.Aq.ConfigUtils.getFieldConfig(r,p);return{valueSrc:"field",valueType:null==h?void 0:h.type,value:p}}if(null!=e&&e.children&&"expr_list"===e._type)return{valueSrc:"value",valueType:"multiselect",value:e.values};if(null!=e&&e.value)return{valueSrc:"value",value:e.value};var b=No(e,t,r,n,l)||Uo(e,t,r,n,l);if(b)return b;n.errors.push("Unexpected arg: ".concat(Co(e)))},_o=function(e,t,r,n,l,o){return"object"!==(0,We.A)(e)||null===e||Array.isArray(e)?{valueSrc:"value",value:e}:Io(e,r,n,l,o)},Bo=function(e,t,r,n,l){var o,a;l.widgetKey&&(a=n.widgets[l.widgetKey]);var i=[n.ctx,t,a,n.settings.sqlDialect];try{var u;o=(u=e).call.apply(u,i)}catch(e){}if(o){var c,s,d,p,f,m,v,g,y,h,b=null!==(c=null===(s=o)||void 0===s?void 0:s.func)&&void 0!==c?c:l.funcKey,E=null==t?void 0:t.func,A=null!==(d=null!==(p=null!==(f=null!==(m=l.opKey)&&void 0!==m?m:l.funcKey)&&void 0!==f?f:l.widgetKey)&&void 0!==p?p:l.outType)&&void 0!==d?d:"?";if(null!==(v=o)&&void 0!==v&&v.children)return{operator:null!==(y=o.operator)&&void 0!==y?y:l.opKey,children:null===(h=o.children)||void 0===h?void 0:h.map((function(e){return Io(e,r,n,l,t)})),operatorOptions:o.operatorOptions};if(null!==(g=o)&&void 0!==g&&g.args){var O=oo.Aq.ConfigUtils.getFuncConfig(n,b),w={};for(var S in o.args){var C=o.args[S];null==O||O.args[S],w[S]=_o(C,0,r,n,l,t)}return{func:b,funcConfig:O,args:w}}if(Object.keys(o).includes("value")){var x,k=o,j=k.value,P=k.error;return P&&l.errors.push("Error while parsing ".concat(A," with func ").concat(null!=E?E:"?",": ").concat(P)),{value:j,valueType:null===(x=a)||void 0===x?void 0:x.type,valueSrc:"value",valueError:P}}l.errors.push("Result of parsing as ".concat(A," should contain either 'children' or 'args' or 'value'"))}},Mo=function(e,t,r,n,l){for(var o in t.opFuncs){var a,i=ko(t.opFuncs[o]);try{for(i.s();!(a=i.n()).done;){var u=a.value,c=Bo(u,e,t,r,Ro(Ro({},n),{},{opKey:o,outType:"op"}));if(c)return c}}catch(e){i.e(e)}finally{i.f()}}},No=function(e,t,r,n,l){for(var o in t.valueFuncs){var a,i=ko(t.valueFuncs[o]);try{for(i.s();!(a=i.n()).done;){var u=a.value,c=Bo(u,e,t,r,Ro(Ro({},n),{},{outType:"value",widgetKey:o}));if(c)return c}}catch(e){i.e(e)}finally{i.f()}}},Uo=function(e,t,r,n,l){var o,i,u,c,s=ko(oo.Aq.ConfigUtils.iterateFuncs(r));try{for(s.s();!(c=s.n()).done;){var d=(0,a.A)(c.value,2),p=d[0],f=d[1],m=f.sqlFunc,v=f.sqlImport;if(v){var g=Bo(v,e,t,r,Ro(Ro({},n),{},{funcKey:p,outType:"func"}));if(g){o=g.func,u=g.funcConfig,i=g.args;var y=!0;if(u){var h=u.returnType;if(["date","datetime"].includes(h)){var b;null!=e&&e._type&&["date","datetime"].includes(e._type)&&e._type!==h&&(y=!1);var E,A=Object.keys(null!==(b=u.args)&&void 0!==b?b:[]).filter((function(e){return["date","datetime"].includes(u.args[e].type)})),O=ko(A);try{for(O.s();!(E=O.n()).done;){var w,S=E.value,C=u.args[S].type,x=null===(w=i[S])||void 0===w?void 0:w.valueType;x&&x!=C&&(y=!1)}}catch(e){O.e(e)}finally{O.f()}}}if(y)break}}if(m&&m===(null==e?void 0:e.func)){o=p;var k=(u=oo.Aq.ConfigUtils.getFuncConfig(r,o)).returnType;i={};var j=0;for(var P in u.args){var R,T,F=null===(R=e.children)||void 0===R?void 0:R[j];null===(T=u)||void 0===T||T.args[P],i[P]=_o(F,0,t,r,n,e),j++}var W=!0;if(["date","datetime"].includes(k)&&null!=l&&l.func&&null!=l&&l._type&&["date","datetime"].includes(l._type)&&l._type!=k&&(W=!1),W)break}}}catch(e){s.e(e)}finally{s.f()}if(o){var V={};for(var L in null===(D=u)||void 0===D?void 0:D.args){var D,q,I=u.args[L],_=null===(q=i)||void 0===q?void 0:q[L];if(void 0===_)if(void 0===(_=null==I?void 0:I.defaultValue)){if(null==I||!I.isOptional)return void n.errors.push("No value for arg ".concat(L," of func ").concat(o))}else _={value:_,valueSrc:_.func?"func":"value",valueType:I.type};_&&(V[L]=_)}return{valueSrc:"func",value:{func:o,args:V},valueType:u.returnType}}n.errors.push("Unexpected func: ".concat(Co(e)))},zo=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{type:"group",id:oo.Aq.uuid(),children1:[e],properties:{conjunction:oo.Aq.DefaultUtils.defaultConjunction(t),not:r||!1}}},Go=function(e,t){var r,n;return null!=e&&void 0===(null===(r=e)||void 0===r?void 0:r.func)&&("text"===t?e=""+e:"multiselect"===t&&void 0===(null===(n=e)||void 0===n?void 0:n.map)&&(e=[e])),e},$o=oo.Aq.OtherUtils.logger,Ho=function(e,t,r){var n,l,o,a,i={errors:[],warnings:[]},u=oo.Aq.ConfigUtils.extendConfig(t,void 0,!1),c=function(e){var t={},r={},n={datetime:[po],date:[po],time:[po]},l=function(n){var l=e.operators[n],o=l.sqlOps?l.sqlOps:l.sqlOp?[l.sqlOp]:void 0;if(l.sqlImport&&(r[n]||(r[n]=[]),r[n].push(l.sqlImport)),o)null==o||o.forEach((function(e){t[e]||(t[e]=[]),t[e].push(n)}));else{var a,i=null===(a=e.operators)||void 0===a?void 0:a[l.reversedOp];(null==i?void 0:i.sqlOp)||(null==i?void 0:i.sqlOps)||(null==i?void 0:i.sqlImport)||l.sqlImport||uo.includes(n)||uo.includes(l.reversedOp)||co.includes(n)||io.warn("[sql] No sqlOp/sqlImport for operator ".concat(n))}};for(var o in e.operators)l(o);var a={};for(var i in e.conjunctions)a[e.conjunctions[i].sqlConj||i.toLowerCase()]=i;for(var u in e.widgets){var c=e.widgets[u].sqlImport;c&&(n[u]||(n[u]=[]),n[u].push(c))}return{operators:t,conjunctions:a,opFuncs:r,valueFuncs:n}}(u);r||(r={}),null!==(n=r)&&void 0!==n&&n.database||(r.database="Postgresql"),e.startsWith("SELECT ")||(e="SELECT * FROM t WHERE "+e);var s,d,p,f=new ao.Parser;try{o=f.astify(e,r),$o.debug("sqlAst:",o)}catch(e){var m=e;i.errors.push(m.message)}return o&&(a=function(e,t){var r;"select"!==e.type&&t.errors.push("Expected SELECT, but got ".concat(e.type));var n=e,l=vo(n.where,t),o=(null!==(r=n.columns)&&void 0!==r?r:[]).find((function(e){return"expr"===e.type})),a=vo(null==o?void 0:o.expr,t);return n.where||(null==o?void 0:o.expr)||t.errors.push("No logic found in WHERE/SELECT"),{where:l,select:a}}(o,i),$o.debug("convertedObj:",a,i),i.convertedObj=a,l=To(null!==(s=null===(d=a)||void 0===d?void 0:d.where)&&void 0!==s?s:null===(p=a)||void 0===p?void 0:p.select,c,u,i,void 0,!0),$o.debug("jsTree:",l)),{tree:l?oo.Aq.Import.loadTree(l):void 0,errors:i.errors,warnings:i.warnings}};function Yo(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var Ko=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Yo(Object(r),!0).forEach((function(t){(0,o.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Yo(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},n);function Jo(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Qo(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Jo(Object(r),!0).forEach((function(t){(0,o.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Jo(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Xo=function(e,t){var r,n=e.split("/")[0],l=[];if("logic"===n){var o=lo[e];r=u.Aq.loadFromJsonLogic(o,t)}else if("sql"===n){var i=lo[e],c=Ko.loadFromSql(i,t);r=c.tree,l=c.errors}else if("spel"===n){var s=lo[e],d=u.Aq.loadFromSpel(s,t),p=(0,a.A)(d,2);r=p[0],l=p[1]}else{if("tree"!==n)throw new Error("Unknown file type ".concat(n));var f=lo[e];r=u.Aq.loadTree(f)}return l.length&&console.warn("Errors while importing from ".concat(e," as ").concat(n,":"),l),{tree:r,errors:l}},Zo=function(e,t,r){var n,l,o,a,i=Xo(e,t);o=i.tree,a=i.errors,console.log("Loaded tree: ",null===(n=o)||void 0===n||null===(l=n.toJS)||void 0===l?void 0:l.call(n));var c=u.Aq.sanitizeTree(o,t,Qo(Qo({},null!=r?r:{}),{},{removeEmptyGroups:!1,removeEmptyRules:!1,removeIncompleteRules:!1})),s=c.fixedTree,d=c.fixedErrors,p=c.nonFixedErrors;return o=s,d.length&&console.warn("Fixed tree errors on load: ",d),p.length&&console.warn("Validation errors on load:",p),{tree:o,errors:a}},ea="tree/complex",ta={translateErrors:!0,includeStringifiedItems:!0,includeItemsPositions:!0},ra={validation:!0,jsonlogic:!0,elasticSearch:!0,mongo:!0,jsTree:!0,spel:!0,strings:!0,sql:!0,actions:!1,withProfile:!1,queryBuilder:!0};function na(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function la(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?na(Object(r),!0).forEach((function(t){(0,o.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):na(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function oa(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function aa(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?oa(Object(r),!0).forEach((function(t){(0,o.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oa(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ia=r(99804),ua=r.n(ia);function ca(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function sa(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ca(Object(r),!0).forEach((function(t){(0,o.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ca(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function da(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function pa(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?da(Object(r),!0).forEach((function(t){(0,o.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):da(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var fa=JSON.stringify,ma={backgroundColor:"lightpink",margin:"10px",padding:"10px"};function va(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ga(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?va(Object(r),!0).forEach((function(t){(0,o.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):va(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ya=JSON.stringify,ha={backgroundColor:"lightpink",margin:"10px",padding:"10px"},ba={backgroundColor:"lightyellow",margin:"10px",padding:"10px"},Ea=JSON.stringify,Aa={backgroundColor:"darkgrey",margin:"10px",padding:"10px"},Oa={backgroundColor:"lightpink",margin:"10px",padding:"10px"},wa=(0,i.memo)((function(e){var t=e.tree,r=e.config,n=u.Aq.jsonLogicFormat(t,r),l=n.logic,o=n.data,a=n.errors;return i.createElement(i.Fragment,null,i.createElement("div",null,i.createElement("a",{href:"http://jsonlogic.com/play.html",target:"_blank",rel:"noopener noreferrer"},"jsonLogicFormat"),":",((null==a?void 0:a.length)||0)>0&&i.createElement("pre",{style:Oa},Ea(a,void 0,2)),!!l&&i.createElement("pre",{style:Aa},"// Rule",":",i.createElement("br",null),Ea(l,void 0,2),i.createElement("br",null),i.createElement("hr",null),"// Data",":",i.createElement("br",null),Ea(o,void 0,2))),i.createElement("hr",null))})),Sa=(0,i.memo)((function(e){var t=e.tree,r=e.config,n=u.Aq._mongodbFormat(t,r),l=(0,a.A)(n,2),o=l[0],c=l[1];return i.createElement(i.Fragment,null,i.createElement("div",null,"mongodbFormat:",c.length>0&&i.createElement("pre",{style:Oa},Ea(c,void 0,2)),i.createElement("pre",{style:Aa},Ea(o,void 0,2))),i.createElement("hr",null))})),Ca=(0,i.memo)((function(e){var t=e.tree,r=e.config,n=u.Aq.elasticSearchFormat(t,r);return i.createElement(i.Fragment,null,i.createElement("div",null,"elasticSearchFormat:",i.createElement("pre",{style:Aa},Ea(n,void 0,2))),i.createElement("hr",null))})),xa=(0,i.memo)((function(e){var t=e.tree,r=(e.config,u.Aq.getTree(t));return i.createElement(i.Fragment,null,i.createElement("div",null,"Tree:",i.createElement("pre",{style:Aa},Ea(r,void 0,2))),i.createElement("hr",null))})),ka=(0,i.memo)((function(e){var t=e.tree,r=e.config,n=u.Aq._spelFormat(t,r),l=(0,a.A)(n,2),o=l[0],c=l[1];return i.createElement(i.Fragment,null,i.createElement("div",null,"spelFormat:",c.length>0&&i.createElement("pre",{style:Oa},Ea(c,void 0,2)),i.createElement("pre",{style:Aa},o)),i.createElement("hr",null))})),ja=(0,i.memo)((function(e){var t=e.tree,r=e.config,n=u.Aq._sqlFormat(t,r),l=(0,a.A)(n,2),o=l[0],c=l[1];return i.createElement(i.Fragment,null,i.createElement("div",null,"sqlFormat:",c.length>0&&i.createElement("pre",{style:Oa},Ea(c,void 0,2)),i.createElement("pre",{style:Aa},o)),i.createElement("hr",null))})),Pa=(0,i.memo)((function(e){var t=e.tree,r=e.config,n=u.Aq.queryString(t,r),l=u.Aq.queryString(t,r,!0);return i.createElement(i.Fragment,null,i.createElement("div",null,"stringFormat:",i.createElement("pre",{style:Aa},n)),i.createElement("hr",null),i.createElement("div",null,"humanStringFormat:",i.createElement("pre",{style:Aa},l)),i.createElement("hr",null))}));function Ra(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ta(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ra(Object(r),!0).forEach((function(t){(0,o.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ra(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Fa(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Wa(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Fa(Object(r),!0).forEach((function(t){(0,o.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Fa(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Va=JSON.stringify,La={backgroundColor:"lightpink",margin:"10px",padding:"10px"};function Da(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function qa(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Da(Object(r),!0).forEach((function(t){(0,o.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Da(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}u.Aq.i18n.addResources("en","custom",{INVALID_SLIDER_VALUE:"Invalid slider value {{val}} translated with i18next",BAD_LEN:"Bad length {{val}} translated with i18next"}),u.Aq.i18n.addResources("en","raqbvalidation",{INCOMPLETE_LHS:"Incomplete left-hand side",INCOMPLETE_RHS:"Incomplete right-hand side"});var Ia=Zl(window._initialSkin||"mui"),_a=Zo(window._initFile||ea,Ia,ta),Ba=_a.tree,Ma=_a.errors;!function(e,t){var r=new CustomEvent("update",{detail:{config:e,initTree:t}});window.dispatchEvent(r)}(Ia,Ba);const Na=function(){var e=(0,i.useRef)({}),t=(0,i.useState)({tree:Ba,initErrors:Ma,config:Ia,skin:"mui",spelStr:"",sqlStr:"",spelErrors:[],sqlErrors:[],sqlWarnings:[],renderBocks:ra,initFile:ea}),r=(0,a.A)(t,2),n=r[0],c=r[1];!function(e){(0,i.useEffect)((function(){return window.addEventListener("update",t),function(){window.removeEventListener("update",t)}}));var t=function(t){var r=t.detail;console.log("Updating..."),e(r)}}((0,i.useCallback)((function(e){var t=e.config;c((function(e){return qa(qa({},e),{},{config:t})}))}),[]));var d=eo(n,0,e).renderRunActions,p=function(e,t){var r=function(){var t=u.Aq.validateTree(e.tree,e.config,Wa({},ta));console.warn(">>> Utils.validateTree()",t)},n=function(){var r=u.Aq.sanitizeTree(e.tree,e.config,Wa(Wa({},ta),{},{removeEmptyGroups:!0,removeEmptyRules:!0,removeIncompleteRules:!0,forceFix:!1})),n=r.fixedErrors,l=r.fixedTree,o=r.nonFixedErrors;n.length&&console.warn("> sanitizeTree fixed errors:",n),o.length&&console.warn("> sanitizeTree non-fixed validation errors:",o),t(Wa(Wa({},e),{},{tree:l}))},l=function(){var r=u.Aq.sanitizeTree(e.tree,e.config,Wa(Wa({},ta),{},{removeEmptyGroups:!1,removeEmptyRules:!1,removeIncompleteRules:!1,forceFix:!1})),n=r.fixedTree,l=r.allErrors;l.length&&console.warn("> sanitizeTree validation errors:",l),t(Wa(Wa({},e),{},{tree:n}))},o=function(){var r=u.Aq.sanitizeTree(e.tree,e.config,Wa(Wa({},ta),{},{forceFix:!0})),n=r.fixedErrors,l=r.fixedTree,o=r.nonFixedErrors;n.length&&console.warn("> sanitizeTree fixed errors:",n),o.length&&console.warn("> sanitizeTree non-fixed validation errors:",o),t(Wa(Wa({},e),{},{tree:l}))};return{renderValidationHeader:function(){return i.createElement(i.Fragment,null,i.createElement("button",{onClick:r},"Show errors in console"),i.createElement("button",{onClick:l},"Validate"),i.createElement("button",{onClick:n},"Sanitize"),i.createElement("button",{onClick:o},"Sanitize & fix"))},renderValidationBlock:function(){var t=e.tree,r=e.config;if(!e.renderBocks.validation)return null;var n=u.Aq.isValidTree(t,r),l=u.Aq.validateTree(t,r,Wa({},ta)).map((function(e){var t=e.errors,r=e.itemStr,n=e.itemPositionStr;return{errors:t.map((function(e){var t=e.side,r=e.delta,n=e.str,l=e.fixed;return"".concat(l?"* ":"").concat(t?"[".concat([t,r].filter((function(e){return null!=e})).join(" "),"] "):"").concat(n)})),itemStr:r,itemPositionStr:n}}));return i.createElement(i.Fragment,null,i.createElement("hr",null),n?null:i.createElement("pre",{style:La},"Tree has errors"),i.createElement("div",null,"Validation errors:",l.length>0?i.createElement("pre",{style:La},Va(l,void 0,2)):"no"))}}}(n,c),f=p.renderValidationHeader,m=p.renderValidationBlock,v=function(e,t,r){var n=eo(e,0,r).runActions,l=function(){var t=e.tree,r=e.config,n=function(){u.Aq.validateTree(t,r,la({},ta))};n(),e.renderBocks.withProfile&&console.profile(),console.time("validation");for(var l=e.renderBocks.withProfile?1:10,o=0;o<l;o++)n();console.timeEnd("validation"),e.renderBocks.withProfile&&console.profileEnd()},a=function(){var t=e.tree,r=e.config,n=function(){u.Aq._spelFormat(t,r),u.Aq._mongodbFormat(t,r),u.Aq._sqlFormat(t,r),u.Aq.jsonLogicFormat(t,r),u.Aq.elasticSearchFormat(t,r),u.Aq.queryString(t,r)};n(),e.renderBocks.withProfile&&console.profile(),console.time("export");for(var l=e.renderBocks.withProfile?1:10,o=0;o<l;o++)n();console.timeEnd("export"),e.renderBocks.withProfile&&console.profileEnd()},c=function(){var t=e.config,r=function(){for(var e in lo)Xo(e,t)};r(),e.renderBocks.withProfile&&console.profile(),console.time("import");for(var n=e.renderBocks.withProfile?1:10,l=0;l<n;l++)r();console.timeEnd("import"),e.renderBocks.withProfile&&console.profileEnd()},s=function(){e.renderBocks.withProfile&&console.profile(),console.time("actions"),n(),console.timeEnd("actions"),e.renderBocks.withProfile&&console.profileEnd()},d=function(r){t(la(la({},e),{},{renderBocks:la(la({},e.renderBocks),{},(0,o.A)({},r,!e.renderBocks[r]))}))};return{renderBenchmarkHeader:function(){return i.createElement(i.Fragment,null,i.createElement("button",{onClick:a},"Export"),i.createElement("button",{onClick:c},"Import"),i.createElement("button",{onClick:l},"Validation"),i.createElement("button",{onClick:s},"Actions"),i.createElement("button",{onClick:d.bind(null,"withProfile")},"with profile: ",e.renderBocks.withProfile?"on":"off"))}}}(n,c,e),g=v.renderBenchmarkHeader,y=function(e){var t=e.renderBocks,r=e.tree,n=e.config;return{renderOutput:function(){return i.createElement("div",null,i.createElement("hr",null),t.spel&&i.createElement(ka,{tree:r,config:n}),t.strings&&i.createElement(Pa,{tree:r,config:n}),t.sql&&i.createElement(ja,{tree:r,config:n}),t.jsonlogic&&i.createElement(wa,{tree:r,config:n}),t.mongo&&i.createElement(Sa,{tree:r,config:n}),t.elasticSearch&&i.createElement(Ca,{tree:r,config:n}),t.jsTree&&i.createElement(xa,{tree:r,config:n}))}}}(n),h=y.renderOutput,b=function(e,t){var r=function(r){var n=r.target.value;t(ga(ga({},e),{},{spelStr:n}))},n=function(r){var n=r.target.value;t(ga(ga({},e),{},{sqlStr:n}))},l=function(){var r=u.Aq.loadFromSpel(e.spelStr,e.config),n=(0,a.A)(r,2),l=n[0],o=n[1],i=u.Aq.sanitizeTree(l,e.config,ta),c=i.fixedTree,s=i.fixedErrors;s.length&&console.warn("Fixed errors after import from SpEL:",s),t(ga(ga({},e),{},{tree:null!=c?c:e.tree,spelErrors:o}))},o=function(){var r=Ko.loadFromSql(e.sqlStr,e.config),n=r.tree,l=r.errors,o=r.warnings,a=u.Aq.sanitizeTree(n,e.config,ta),i=a.fixedTree,c=a.fixedErrors;c.length&&console.warn("Fixed errors after import from SQL:",c),t(ga(ga({},e),{},{tree:null!=i?i:e.tree,sqlErrors:l,sqlWarnings:o}))};return{renderInputs:function(){return i.createElement("div",null,i.createElement("br",null),e.renderBocks.spel?i.createElement("div",{className:"query-import-spel"},"SpEL:  ",i.createElement("input",{type:"text",size:150,value:e.spelStr,onChange:r}),i.createElement("button",{onClick:l},"import"),i.createElement("br",null),e.spelErrors.length>0&&i.createElement("pre",{style:ha},ya(e.spelErrors,void 0,2))):null,e.renderBocks.sql?i.createElement("div",{className:"query-import-sql"},"SQL:  ",i.createElement("input",{type:"text",size:150,value:e.sqlStr,onChange:n}),i.createElement("button",{onClick:o},"import"),i.createElement("br",null),e.sqlErrors.length>0&&i.createElement("pre",{style:ha},ya(e.sqlErrors,void 0,2)),e.sqlWarnings.length>0&&i.createElement("pre",{style:ba},ya(e.sqlWarnings,void 0,2))):null)}}}(n,c).renderInputs,E=function(e,t){var r=function(){var r=ua()(e.config);r.settings.showLock=!r.settings.showLock,t(sa(sa({},e),{},{config:r}))},n=function(){var r=ua()(e.config);r.settings.showErrorMessage=!r.settings.showErrorMessage,t(sa(sa({},e),{},{config:r}))};return{renderConfigChangeHeader:function(){return i.createElement(i.Fragment,null,i.createElement("button",{onClick:r},"show lock: ",e.config.settings.showLock?"on":"off"),i.createElement("button",{onClick:n},"show errors: ",e.config.settings.showErrorMessage?"on":"off"))}}}(n,c),A=E.renderConfigChangeHeader,O=function(e,t){var r=function(r){var n=r.target.value,l=Zo(n,e.config),o=l.tree,a=l.errors;t(pa(pa({},e),{},{initFile:n,tree:o,initErrors:a})),window._initFile=n},n=function(){var r=Zo(e.initFile,e.config),n=r.tree,l=r.errors;t(pa(pa({},e),{},{tree:n,initErrors:l}))};return{renderInitFilesHeader:function(){return i.createElement(i.Fragment,null,i.createElement("select",{value:e.initFile,onChange:r},Object.keys(lo).map((function(e){return i.createElement("option",{key:e},e)}))),i.createElement("button",{onClick:n},"Reload"))},renderInitErrors:function(){return i.createElement(i.Fragment,null,e.initErrors.length>0&&i.createElement("pre",{style:ma},fa(e.initErrors,void 0,2)))}}}(n,c),w=O.renderInitFilesHeader,S=O.renderInitErrors,C=function(e,t){var r=function(r){var n=r.target.value,l=Zl(r.target.value),o=u.Aq.sanitizeTree(e.tree,l,Ta(Ta({},ta),{},{removeEmptyGroups:!1,removeEmptyRules:!1,removeIncompleteRules:!1})),a=o.fixedTree,i=o.fixedErrors,c=o.nonFixedErrors;i.length&&console.warn("Fixed errors after change UI framework:",i),c.length&&console.warn("Not fixed errors after change UI framework:",c),t(Ta(Ta({},e),{},{skin:n,config:l,tree:a})),window._initialSkin=n};return{renderSkinSelector:function(){return i.createElement("select",{value:e.skin,onChange:r},i.createElement("option",{key:"vanilla"},"vanilla"),i.createElement("option",{key:"antd"},"antd"),i.createElement("option",{key:"material"},"material"),i.createElement("option",{key:"mui"},"mui"),i.createElement("option",{key:"bootstrap"},"bootstrap"),i.createElement("option",{key:"fluent"},"fluent"))}}}(n,c),x=C.renderSkinSelector,k=function(e,t){var r=function(r){t(aa(aa({},e),{},{renderBocks:aa(aa({},e.renderBocks),{},(0,o.A)({},r,!e.renderBocks[r]))}))};return{renderBlocksSwitcher:function(){return i.createElement(i.Fragment,null,i.createElement("button",{onClick:r.bind(null,"queryBuilder")},"Builder: ",e.renderBocks.queryBuilder?"on":"off"),i.createElement("button",{onClick:r.bind(null,"validation")},"Validation: ",e.renderBocks.validation?"on":"off"),i.createElement("button",{onClick:r.bind(null,"jsTree")},"Tree: ",e.renderBocks.jsTree?"on":"off"),i.createElement("button",{onClick:r.bind(null,"jsonlogic")},"JsonLogic: ",e.renderBocks.jsonlogic?"on":"off"),i.createElement("button",{onClick:r.bind(null,"spel")},"SpEL: ",e.renderBocks.spel?"on":"off"),i.createElement("button",{onClick:r.bind(null,"strings")},"Strings: ",e.renderBocks.strings?"on":"off"),i.createElement("button",{onClick:r.bind(null,"sql")},"SQL: ",e.renderBocks.sql?"on":"off"),i.createElement("button",{onClick:r.bind(null,"mongo")},"Mongo: ",e.renderBocks.mongo?"on":"off"),i.createElement("button",{onClick:r.bind(null,"elasticSearch")},"ElasticSearch: ",e.renderBocks.elasticSearch?"on":"off"),e.renderBocks.queryBuilder&&i.createElement("button",{onClick:r.bind(null,"actions")},"Actions in console: ",e.renderBocks.actions?"on":"off"))}}}(n,c),j=k.renderBlocksSwitcher,P=(0,i.useCallback)((function(e){return i.createElement("div",{className:"query-builder-container",style:{padding:"10px"}},i.createElement("div",{className:"query-builder qb-lite"},i.createElement(u.M$,e)))}),[]),R=(0,i.useCallback)((function(t,r,l,o){l&&n.renderBocks.actions&&console.info(l),e.current.immutableTree=t,e.current.config=r,e.current.actions=o,T()}),[n.renderBocks]),T=s()((function(){c((function(t){var r=e.current.immutableTree,n=u.Aq.ConfigUtils.areConfigsSame(e.current.config,t.config)?t.config:e.current.config;return qa(qa({},t),{},{tree:r,config:n})}))}),100);return i.createElement("div",null,i.createElement("div",null,"Settings:  ",x()," ",A()),i.createElement("div",null,"Output:  ",j()),i.createElement("div",null,"Data:  ",w(),i.createElement("button",{onClick:function(){c(qa(qa({},n),{},{tree:u.Aq.loadTree(ro),initErrors:[]}))}},"Clear"),S(),d()),i.createElement("div",null,"Validation:  ",f()),i.createElement("div",null,"Benchmark:  ",g()),b(),i.createElement(zl,{skin:n.skin}),n.renderBocks.queryBuilder&&i.createElement(u.XK,(0,l.A)({},n.config,{value:n.tree,onInit:R,onChange:R,renderBuilder:P})),i.createElement("div",{className:"query-builder-result"},i.createElement("div",null,m(),h())))}},37354:()=>{}}]);
//# sourceMappingURL=668.bundle.js.map