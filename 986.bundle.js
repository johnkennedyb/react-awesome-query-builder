"use strict";(self.webpackChunk_react_awesome_query_builder_examples=self.webpackChunk_react_awesome_query_builder_examples||[]).push([[986],{59986:(e,t,r)=>{r.r(t),r.d(t,{default:()=>D});var n=r(42664),l=r(6467),o=r(12024),i=r(67308),a=r(76569),u=r(60712),s=r(1783),c=r(11921),p=function(e){var t=e.k,r=e.value,n=e.setValue,l=e.listValues,o=(0,i.useMemo)((function(){return null==l?void 0:l.map((function(e){var t=e.value,r=e.title;return{id:null==t?void 0:t.toString(),label:null!=r?r:"",properties:["REQUIRED","CREATE","UPDATE"],type:{format:"INTEGER"}}}))}),[l]),a=(0,i.useCallback)((function(e,t){var r=e.map((function(e){return{value:e.id||e.label,type:e.__isNew__?"const":"property"}}));return n(r),r}),[n]),u=(0,i.useCallback)((function(e){return e.id}),[]),s=(0,i.useCallback)((function(e){return e.label}),[]),p=(0,i.useMemo)((function(){return e=o,(t=r)?t.map((function(t){var r="const"!=t.type&&e&&e.find((function(e){return e.id===t.value}));return r||(r={id:t.value,label:t.value,__isNew__:!0}),r})):[];var e,t}),[r]);return i.createElement(c.A,{menuPortalTarget:document.body,menuPosition:"fixed",key:t,isMulti:!0,options:o,value:p,getOptionValue:u,getOptionLabel:s,onChange:a})};const m=(0,i.memo)(p);function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach((function(t){(0,l.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var f=r(58809);function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){(0,l.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function E(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){(0,l.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}u.A.use();var O,S,h,j,P,w,A=(S=v(v({},(O=s.WQ).widgets),{},{case_value:(w=O,d(d({},w.widgets.case_value),{},{spelFormatValue:a.Aq.SpelUtils.spelFormatConcat,spelImportValue:a.Aq.SpelUtils.spelImportConcat,jsonLogic:a.Aq.JsonLogicUtils.jsonLogicFormatConcat,jsonLogicImport:a.Aq.JsonLogicUtils.jsonLogicImportConcat,factory:function(e){var t,r=e.value,n=e.setValue,l=e.id,o=e.fieldDefinition;return i.createElement(m,{value:r,setValue:n,listValues:null===(t=o.fieldSettings)||void 0===t?void 0:t.listValues,k:l})}}))}),h={text:{label:"Text",type:"text",valueSources:["value","field"],excludeOperators:["proximity"]},qty:{label:"Qty",type:"number",valueSources:["value"],fieldSettings:{min:0,max:1e3},preferWidgets:["number"]},discount:{label:"Discount",type:"number",valueSources:["value"],fieldSettings:{min:0,max:100,step:5},preferWidgets:["slider","rangeslider"],widgets:{slider:{widgetProps:{customProps:{input:{InputProps:{endAdornment:i.createElement(f.A,{position:"end"},"%")}}}}}}},price:{label:"Price",type:"number",preferWidgets:["price"],valueSources:["value"],isSpelVariable:!0,fieldSettings:{min:10,max:100}},color:{label:"Color",type:"select",valueSources:["value"],fieldSettings:{listValues:[{value:"yellow",title:"Yellow"},{value:"blue",title:"Blue"},{value:"green",title:"Green"},{value:"orange",title:"Orange"}]}},is_promotion:{label:"Promotoion",type:"boolean",operators:["equal"],valueSources:["value"],mainWidgetProps:{hideOperator:!0,operatorInlineLabel:"is"}}},j=v(v({},O.settings),{},{caseValueField:{type:"select",valueSources:["value"],fieldSettings:{listValues:[{value:"Hot",title:"Hot"},{value:"In stock",title:"In stock"},{value:"other",title:"other"}]},mainWidgetProps:{valueLabel:"Then",valuePlaceholder:"Then"}},maxNumberOfCases:5,canRegroupCases:!0,maxNesting:3,canLeaveEmptyCase:!1,showErrorMessage:!0}),P={LOWER:a.uu.LOWER,UPPER:a.uu.UPPER,LINEAR_REGRESSION:a.uu.LINEAR_REGRESSION},v(v({},O),{},{funcs:P,widgets:S,fields:h,settings:j})),_={backgroundColor:"darkgrey",margin:"10px",padding:"10px"},q={backgroundColor:"lightpink",margin:"10px",padding:"10px"},k={id:a.Aq.uuid(),type:"switch_group"},x=(a.Aq.loadTree(k),a.Aq.loadFromJsonLogic({if:[{and:[{">":[{var:"discount"},50]},{"==":[{var:"is_promotion"},!0]}]},"Hot",{if:[{">":[{var:"qty"},0]},"In stock","other"]}]},A)),C=a.Aq.validateTree(x,A);null!=C&&C.length&&console.warn("Validation errors:",C);var N=a.Aq.loadFromSpel("((discount > 50 && is_promotion == true) ? 'Hot' : (qty > 0 ? 'In stock' : 'other'))",A),L=(0,o.A)(N,2),I=(L[0],L[1]);null!=I&&I.length&&console.warn("Errors while importing from SpEL: ",I);const D=function(){var e,t,r,l,u,s,c,p,m,g=(0,i.useState)({tree:x,config:A,spelStr:"",spelErrors:[]}),d=(0,o.A)(g,2),f=d[0],b=d[1],v=(0,i.useCallback)((function(e,t){b((function(r){return E(E({},r),{},{tree:e,config:t})}))}),[]),y=(0,i.useCallback)((function(e){return i.createElement("div",{className:"query-builder-container",style:{padding:"10px"}},i.createElement("div",{className:"query-builder qb-lite"},i.createElement(a.M$,e)))}),[]);return i.createElement("div",null,i.createElement("div",{className:"query-import-spel"},"Input SpEL:",i.createElement("input",{type:"text",size:150,value:f.spelStr,onChange:function(e){var t=e.target.value;b(E(E({},f),{},{spelStr:t}))}}),i.createElement("button",{onClick:function(){var e=a.Aq.loadFromSpel(f.spelStr,f.config),t=(0,o.A)(e,2),r=t[0],n=t[1],l=a.Aq.sanitizeTree(r,f.config),i=l.fixedTree,u=l.fixedErrors;u.length&&console.warn("Fixed errors after import from SpEL:",u),b(E(E({},f),{},{tree:null!=i?i:f.tree,spelErrors:n}))}},"import"),i.createElement("br",null),f.spelErrors.length>0&&i.createElement("pre",{style:q},JSON.stringify(f.spelErrors,void 0,2))),i.createElement(a.XK,(0,n.A)({},A,{value:f.tree,onInit:v,onChange:v,renderBuilder:y})),i.createElement("div",{className:"query-builder-result"},(s=a.Aq._spelFormat(f.tree,f.config),p=(c=(0,o.A)(s,2))[0],m=c[1],i.createElement(i.Fragment,null,i.createElement("div",null,"spelFormat:",m.length>0&&i.createElement("pre",{style:q},JSON.stringify(m,void 0,2)),i.createElement("pre",{style:_},JSON.stringify(p,void 0,2)),"Values:",i.createElement("pre",null,JSON.stringify(a.Aq.TreeUtils.getSwitchValues(f.tree),void 0,2))),i.createElement("hr",null))),(r=(t=a.Aq.jsonLogicFormat(f.tree,f.config)).logic,l=t.data,u=t.errors,i.createElement(i.Fragment,null,i.createElement("div",null,i.createElement("a",{href:"http://jsonlogic.com/play.html",target:"_blank",rel:"noopener noreferrer"},"jsonLogicFormat"),":",((null==u?void 0:u.length)||0)>0&&i.createElement("pre",{style:q},JSON.stringify(u,void 0,2)),!!r&&i.createElement("pre",{style:_},"// Rule",":",i.createElement("br",null),JSON.stringify(r,void 0,2),i.createElement("br",null),i.createElement("hr",null),"// Data",":",i.createElement("br",null),JSON.stringify(l,void 0,2))),i.createElement("hr",null))),(e=a.Aq.getTree(f.tree),i.createElement(i.Fragment,null,"Tree:",i.createElement("pre",null,JSON.stringify(e,void 0,2)),i.createElement("br",null),i.createElement("hr",null),i.createElement("br",null)))))}}}]);
//# sourceMappingURL=986.bundle.js.map